# Shell and Terminal Setup Analysis

## Overview

### Current Environment
- **Shell**: GNU Bash 5.2.21
- **Terminal Type**: xterm-256color
- **Terminal Multiplexer**: tmux 3.4
- **OS**: Linux 5.15.167.4-microsoft-standard-WSL2 (WSL2 on Windows)
- **Locale**: C.UTF-8

### Key Tools Installed
- **Shell Tools**: bash-completion (2.11), fzf (0.44.1)
- **Modern CLI**: ripgrep (rg), fzf
- **Editor**: micro (with LSP support)
- **File Manager**: yazi (TUI file manager)
- **Markdown Viewer**: glow
- **Version Control**: gh (GitHub CLI)
- **Node Version Manager**: nvm

### Missing Common Tools
- zsh (not installed)
- oh-my-zsh
- starship prompt
- bat (cat replacement with syntax highlighting)
- eza/exa (modern ls replacement)
- fd (modern find replacement)
- zellij (modern terminal multiplexer alternative)

## Shell Configuration (Bash)

### Configuration Files
- **~/.bashrc**: Primary interactive shell configuration
- **~/.bash_profile**: Login shell configuration (sources .bashrc)
- **~/.profile**: Standard POSIX shell profile

### Current Customizations

#### History Settings
```bash
HISTCONTROL=ignoreboth
HISTSIZE=1000
HISTFILESIZE=2000
shopt -s histappend
```

**Issues**:
- History size is quite limited (1000 commands)
- No timestamp recording in history
- No history sharing between sessions

#### Prompt Configuration
- Using default Debian/Ubuntu colored prompt
- Shows: `user@host:path$`
- No git integration
- No status indicators
- No customization with starship or powerlevel10k

#### Path Configuration
```bash
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/bin:$HOME/.local/bin:$PATH"  # Duplicated in .bash_profile
```

#### Environment Variables
```bash
export EDITOR=micro
export VISUAL=micro
export NVM_DIR="$HOME/.nvm"
export GOOGLE_CLOUD_PROJECT="crypto-moon-480104-e1"
```

#### Custom Functions
**Yazi Wrapper** (Lines 130-137):
```bash
function y() {
  local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
  yazi "$@" --cwd-file="$tmp"
  if cwd="$(command cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
    cd -- "$cwd"
  fi
  rm -f -- "$tmp"
}
```
- Excellent integration: allows changing directory when exiting yazi
- Shows good understanding of shell wrapper patterns

#### Aliases
```bash
alias ls='ls --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias trestle="/home/benjamin/tools/trestle/.venv/bin/trestle"
```

**Observations**:
- Basic color support enabled
- Standard Debian aliases
- No modern tool replacements (bat, eza, fd)
- No git aliases

#### Completion
- bash-completion enabled (system-wide)
- nvm bash completion loaded
- No fzf shell integration configured

### Potential Issues
1. **PATH Duplication**: `.local/bin` added twice (bashrc and bash_profile)
2. **Limited History**: Only 1000 commands saved
3. **No fzf Integration**: fzf installed but not configured for Ctrl+R, Alt+C, etc.
4. **Basic Prompt**: No git status, exit code, or other contextual information

## Prompt Configuration

### Current State
- Using default bash prompt with color support
- Format: `user@host:path$`
- No git branch information
- No virtual environment indicators
- No exit status display
- No command duration tracking

### Enhancement Opportunities
The current prompt is functional but provides minimal information. Modern prompt frameworks offer:

1. **Git Integration**: Branch name, dirty status, ahead/behind indicators
2. **Exit Status**: Visual indicator of last command success/failure
3. **Command Duration**: Show time for long-running commands
4. **Directory Truncation**: Smart path shortening for deep directories
5. **Virtual Environment**: Python venv, node version indicators
6. **Custom Segments**: Docker, Kubernetes context, cloud provider info

### Recommended Solutions

#### Option 1: Starship (Rust-based, cross-shell)
- Minimal, fast, infinitely customizable
- Written in Rust (fast startup)
- Works across bash, zsh, fish, PowerShell
- Built-in git, language version, cloud context support
- Easy TOML configuration

#### Option 2: Bash-Git-Prompt
- Lightweight, bash-specific
- Shows git status with colors
- No dependencies
- Simple setup

#### Option 3: Powerline-Go
- Beautiful Unicode symbols
- Fast (written in Go)
- Highly customizable

## Tmux Configuration

### Installation Status
- **Installed**: Yes
- **Version**: tmux 3.4 (latest stable)
- **Configuration**: None found

### Current State
- **~/.tmux.conf**: Does not exist
- **~/.config/tmux/**: Does not exist
- **~/.tmux/plugins/**: Does not exist
- **Running with**: Default tmux configuration

### Default tmux Settings Issues
1. **Prefix Key**: Ctrl+b (awkward to press)
2. **No Mouse Support**: Cannot click to switch panes
3. **Poor Colors**: May not properly support 256 colors
4. **No Status Bar Customization**: Minimal information
5. **Window Numbering**: Starts at 0 (1 is more natural for keyboard)
6. **No Plugin Support**: Missing TPM (Tmux Plugin Manager)
7. **Split Navigation**: Uses prefix + arrow keys (inefficient)

### Essential tmux Configuration Recommendations

#### Basic .tmux.conf Settings
```bash
# Change prefix to Ctrl+a (easier to reach)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Enable mouse support
set -g mouse on

# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Reduce escape time for vim
set -sg escape-time 0

# Increase history limit
set -g history-limit 50000

# Better colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Easier split commands
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Vim-like pane switching
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"
```

#### Recommended Plugins (via TPM)
1. **tmux-sensible**: Sensible defaults everyone agrees on
2. **tmux-yank**: Copy to system clipboard
3. **tmux-resurrect**: Save and restore tmux sessions
4. **tmux-continuum**: Auto-save sessions
5. **tmux-pain-control**: Better pane navigation
6. **vim-tmux-navigator**: Seamless vim/tmux navigation

### tmux Session Management
Currently no session management detected. Opportunities:
- **tmuxinator**: YAML-based session configuration
- **teamocil**: Alternative session manager
- Custom shell scripts for project-specific layouts

## Terminal Plugins/Extensions

### Currently Integrated

#### fzf (Fuzzy Finder)
- **Installed**: Yes (0.44.1)
- **Shell Integration**: NOT CONFIGURED
- **Missing Keybindings**:
  - Ctrl+R: Command history search
  - Ctrl+T: File finder
  - Alt+C: Directory navigation

**Configuration Needed**:
```bash
# Add to .bashrc
[ -f /usr/share/doc/fzf/examples/key-bindings.bash ] && source /usr/share/doc/fzf/examples/key-bindings.bash
[ -f /usr/share/doc/fzf/examples/completion.bash ] && source /usr/share/doc/fzf/examples/completion.bash

# Optional: Use fd instead of find for fzf
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_ALT_C_COMMAND='fd --type d --hidden --follow --exclude .git'
```

#### Yazi (File Manager)
- **Installed**: Yes
- **Configuration**: ~/.config/yazi/yazi.toml
- **Shell Integration**: Excellent (cd wrapper function)
- **Plugin**: glow previewer for markdown files

**Current yazi.toml**:
```toml
[plugin]
prepend_previewers = [
  { name = "*.md", run = "glow" },
]
```

#### Micro Editor
- **Installed**: Yes
- **Configuration**: ~/.config/micro/settings.json
- **Features**: LSP support for Python (pylsp)
- **Settings**:
  - LSP autocomplete details enabled
  - Format on save enabled

#### bash-completion
- **Installed**: Yes (2.11)
- **Enabled**: Yes
- **Works with**: System commands, git, etc.

### Missing Integrations

#### Modern CLI Tool Replacements
None of the following modern tools are installed:
- **bat**: Syntax-highlighted cat with git integration
- **eza/exa**: Modern ls with git status, icons
- **fd**: Fast, user-friendly find alternative
- **delta**: Better git diff viewer
- **dust**: Intuitive du replacement
- **duf**: Better df with colors
- **btop**: Beautiful resource monitor
- **tldr**: Simplified man pages

#### Directory Navigation
- **zoxide**: Smart cd replacement with frecency
- **autojump**: Jump to frequent directories
- Not using fzf for Alt+C directory navigation

#### Git Enhancements
- **lazygit**: TUI for git operations
- **tig**: Text-mode interface for git
- **delta**: Better diff viewing (syntax highlighting)
- No git aliases configured

## Integration Opportunities

### 1. fzf Complete Integration
**Priority**: HIGH

**Benefits**:
- Ctrl+R: Fuzzy history search (massive productivity boost)
- Ctrl+T: Fuzzy file finder
- Alt+C: Fast directory navigation
- Tab completion for kill, ssh, etc.

**Implementation**:
```bash
# Install fzf shell integration
source /usr/share/doc/fzf/examples/key-bindings.bash
source /usr/share/doc/fzf/examples/completion.bash

# Enhanced with fd and bat preview
export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border"
export FZF_CTRL_T_OPTS="--preview 'bat --color=always --line-range :500 {}'"
export FZF_ALT_C_OPTS="--preview 'eza --tree --level=2 {}'"
```

### 2. tmux + vim/micro Integration
**Priority**: MEDIUM

**Current Gap**: No seamless navigation between editor and tmux panes

**Solutions**:
- tmux-navigator plugin
- Configure micro/vim to use tmux-aware navigation
- Unified keybindings between editor and multiplexer

### 3. Modern CLI Tool Suite
**Priority**: HIGH

**Install and alias**:
```bash
# Install
sudo apt install bat fd-find eza ripgrep git-delta

# Create aliases (bat and fd have different names on Ubuntu)
alias cat='batcat'
alias bat='batcat'
alias fd='fdfind'
alias ls='eza'
alias ll='eza -la'
alias tree='eza --tree'

# Git integration
git config --global core.pager "delta"
git config --global interactive.diffFilter "delta --color-only"
```

### 4. Shell History Enhancement
**Priority**: MEDIUM

**Improvements**:
```bash
# Unlimited history
export HISTSIZE=100000
export HISTFILESIZE=200000

# Timestamps
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "

# Ignore duplicates and commands starting with space
export HISTCONTROL=ignoreboth:erasedups

# Share history across sessions
shopt -s histappend
PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"
```

### 5. Smart Prompt with Git
**Priority**: MEDIUM

**Install Starship**:
```bash
curl -sS https://starship.rs/install.sh | sh
echo 'eval "$(starship init bash)"' >> ~/.bashrc
```

**Benefits**:
- Git branch and status
- Exit code indicators
- Command duration
- Language version (Python, Node)
- Minimal performance impact

### 6. Clipboard Integration
**Priority**: LOW (WSL2 has clipboard integration already)

**For tmux**:
- Install tmux-yank plugin
- Configure vim/micro to use system clipboard

### 7. Session Persistence
**Priority**: MEDIUM

**tmux-resurrect + tmux-continuum**:
- Automatically save tmux sessions
- Survive reboots
- Restore entire workspace layout

### 8. Directory Navigation Enhancement
**Priority**: MEDIUM

**Install zoxide**:
```bash
# Install
curl -sS https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | bash

# Add to .bashrc
eval "$(zoxide init bash)"

# Now use 'z project-name' instead of 'cd /long/path/to/project-name'
```

## Recommendations

### HIGH Priority (Immediate Impact)

#### 1. Configure fzf Shell Integration
**Impact**: Massive productivity boost for command history and file navigation

**Steps**:
```bash
# Add to .bashrc
source /usr/share/doc/fzf/examples/key-bindings.bash
source /usr/share/doc/fzf/examples/completion.bash
```

**Time**: 2 minutes
**Benefit**: Instantly accessible fuzzy history search (Ctrl+R) and file finding (Ctrl+T)

#### 2. Install Modern CLI Tools
**Impact**: Better readability, faster searches, improved git workflow

**Commands**:
```bash
sudo apt install bat fd-find eza git-delta

# Add aliases to .bashrc
echo "alias cat='batcat'" >> ~/.bashrc
echo "alias bat='batcat'" >> ~/.bashrc
echo "alias fd='fdfind'" >> ~/.bashrc
echo "alias ls='eza --icons'" >> ~/.bashrc
echo "alias ll='eza -la --icons --git'" >> ~/.bashrc
echo "alias tree='eza --tree'" >> ~/.bashrc
```

**Time**: 10 minutes
**Benefit**: Syntax highlighting, git integration, much faster file operations

#### 3. Create Basic tmux Configuration
**Impact**: Ergonomic terminal multiplexing

**Create ~/.tmux.conf**:
```bash
# Better prefix
set -g prefix C-a
unbind C-b

# Mouse support
set -g mouse on

# Better indexing
set -g base-index 1
setw -g pane-base-index 1

# Better colors
set -g default-terminal "screen-256color"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Easier splits
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
```

**Time**: 5 minutes
**Benefit**: Much more comfortable tmux usage

#### 4. Improve Bash History
**Impact**: Better command recall and history management

**Add to .bashrc**:
```bash
# Larger history
export HISTSIZE=100000
export HISTFILESIZE=200000

# Timestamps
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "

# Better control
export HISTCONTROL=ignoreboth:erasedups

# Append, don't overwrite
shopt -s histappend
```

**Time**: 2 minutes
**Benefit**: Never lose important commands, better searchability

### MEDIUM Priority (Quality of Life)

#### 5. Install Starship Prompt
**Impact**: Better contextual awareness (git status, language versions)

**Commands**:
```bash
curl -sS https://starship.rs/install.sh | sh
echo 'eval "$(starship init bash)"' >> ~/.bashrc
```

**Time**: 5 minutes
**Benefit**: Always know git branch, uncommitted changes, Python/Node versions

#### 6. Set Up Tmux Plugin Manager
**Impact**: Session persistence, better clipboard, enhanced features

**Installation**:
```bash
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Add to .tmux.conf:
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Initialize TPM (keep at bottom)
run '~/.tmux/plugins/tpm/tpm'
```

**Time**: 10 minutes
**Benefit**: Save/restore sessions, better clipboard integration

#### 7. Install zoxide for Smart Directory Navigation
**Impact**: Faster navigation to frequent directories

**Commands**:
```bash
curl -sS https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | bash
echo 'eval "$(zoxide init bash)"' >> ~/.bashrc
```

**Time**: 5 minutes
**Benefit**: Type `z dev` instead of `cd ~/tools/dev_workflow`

#### 8. Configure Git Delta
**Impact**: Much better git diff viewing

**Commands**:
```bash
git config --global core.pager "delta"
git config --global interactive.diffFilter "delta --color-only"
git config --global delta.navigate true
git config --global delta.side-by-side true
```

**Time**: 2 minutes
**Benefit**: Syntax-highlighted diffs with line numbers

### LOW Priority (Nice to Have)

#### 9. Install lazygit
**Impact**: Visual git interface in terminal

**Commands**:
```bash
# Add PPA or download binary
LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | grep -Po '"tag_name": "v\K[^"]*')
curl -Lo lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/latest/download/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz"
tar xf lazygit.tar.gz lazygit
sudo install lazygit /usr/local/bin
```

**Time**: 5 minutes
**Benefit**: Easy git staging, committing, branching via TUI

#### 10. Additional Modern Tools
**Impact**: Incremental improvements

**Install**:
```bash
sudo apt install tldr btop duf dust
```

- **tldr**: Quick command examples (better than man for learning)
- **btop**: Beautiful system monitor
- **duf**: Colorful disk usage
- **dust**: Intuitive disk usage tree

**Time**: 5 minutes
**Benefit**: Better system monitoring and documentation access

#### 11. Create Git Aliases
**Impact**: Faster git workflow

**Add to ~/.bashrc**:
```bash
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline --graph --decorate'
alias gd='git diff'
alias gco='git checkout'
```

**Time**: 2 minutes
**Benefit**: Shorter git commands

#### 12. Configure direnv
**Impact**: Auto-load project-specific environment variables

**Commands**:
```bash
sudo apt install direnv
echo 'eval "$(direnv hook bash)"' >> ~/.bashrc
```

**Time**: 5 minutes
**Benefit**: Automatic Python venv activation, project-specific env vars

## Summary

### Current Strengths
1. Modern terminal multiplexer (tmux 3.4) installed
2. fzf installed (but not configured)
3. Good yazi integration with shell wrapper
4. ripgrep available for fast searching
5. micro configured with LSP support
6. bash-completion enabled

### Critical Gaps
1. fzf not integrated with shell (no Ctrl+R fuzzy history)
2. No tmux configuration (using all defaults)
3. Missing modern CLI tools (bat, eza, fd, delta)
4. Basic prompt with no git integration
5. Limited history configuration
6. No aliases for modern tools

### Quick Wins (< 30 minutes total)
1. Enable fzf shell integration (2 min)
2. Install bat, eza, fd-find (5 min)
3. Create basic .tmux.conf (5 min)
4. Improve history settings (2 min)
5. Add modern tool aliases (2 min)
6. Install starship prompt (5 min)
7. Configure git delta (2 min)

**Total Impact**: Transform terminal experience from basic to modern with minimal effort.

### Long-term Enhancements
- Consider switching to zsh with oh-my-zsh or zinit
- Set up tmux session management (tmuxinator)
- Install complete Rust-based CLI suite
- Create project-specific tmux layouts
- Set up comprehensive dotfiles repository

## References

Based on research from 2025 best practices:

- [fzf: Fuzzy finder for searching files and text - Linux Bash](https://www.linuxbash.sh/post/fzf-fuzzy-finder-for-searching-files-and-text)
- [4 Useful fzf Tricks for Your Terminal | Pragmatic Pineapple](https://pragmaticpineapple.com/four-useful-fzf-tricks-for-your-terminal/)
- [Improving shell workflows with fzf - Sebastian Jambor's blog](https://seb.jambor.dev/posts/improving-shell-workflows-with-fzf/)
- [13 CLI Tools Every Developer Should Master in 2025 - IT'S FOSS](https://itsfoss.gitlab.io/post/13-cli-tools-every-developer-should-master-in-2025/)
- [Essential Tmux Configuration and Plugins for Terminal Productivity - Minimalist Django](https://minimalistdjango.com/TIL/2025-07-02-tmux/)
- [How Tmux Supercharged My Development Workflow? - Medium](https://devprogramming.medium.com/how-tmux-supercharged-my-development-workflow-5b9dcf004789)
- [tmux: 13 Cool Tweaks to Make It Personal and Powerful - DEV Community](https://dev.to/krishnam/tmux-13-cool-tweaks-to-make-it-personal-and-powerful-487p)
- [Modern Alternatives to Traditional Linux Commands - Joseph Frimpong](https://frimpsjoek.github.io/blog/posts/2025-10-17-new-linux-commands/)
- [Modern CLI Deep Dive: Why Rust and GPU Terminals Change Everything in 2025 - DEV](https://dev.to/dataformathub/modern-cli-deep-dive-why-rust-and-gpu-terminals-change-everything-in-2025-398p)
- [Why the Terminal Is Cool Again: The Rise of Modern CLI Tools - Medium](https://medium.com/@daxx5/why-the-terminal-is-cool-again-the-rise-of-modern-cli-tools-in-developer-workflows-3017b021b713)
