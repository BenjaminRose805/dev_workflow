# Yazi File Manager Analysis

## Overview

**Version:** Yazi 25.5.31 (b65a880 2025-05-30)

Yazi is a blazing fast terminal file manager written in Rust, based on async I/O. It provides an efficient, user-friendly, and customizable file management experience with the following core characteristics:

- **Performance**: All I/O operations are asynchronous, CPU tasks spread across multiple threads
- **Architecture**: Built on Rust's async I/O capabilities, significantly faster than Python-based alternatives (e.g., Ranger)
- **Extensibility**: Concurrent plugin system with Lua-based plugins for UI customization, functional extensions, and custom previewers/preloaders/spotters/fetchers
- **Package Management**: Built-in `ya pkg` command for easy plugin installation and updates

## Current Configuration

### Configuration Files Present

Located in `~/.config/yazi/`:

1. **yazi.toml** (69 bytes)
   - Minimal configuration
   - Only configures markdown preview with glow
   - Missing git fetcher configuration (git plugin installed but not fully configured)

2. **init.lua** (49 bytes)
   - Single line: `require("git"):setup()`
   - Loads git status integration plugin

3. **package.toml** (217 bytes)
   - Manages plugin dependencies
   - Currently tracks 2 plugins: git and glow

4. **keymap.toml** - NOT PRESENT
   - Using default keybindings
   - No custom shortcuts configured

5. **theme.toml** - NOT PRESENT
   - Using default color scheme
   - No visual customization

### Current Settings

```toml
# yazi.toml
[plugin]
prepend_previewers = [
  { name = "*.md", run = "glow" },
]
```

**Analysis**: Configuration is minimal and only addresses markdown preview. Git plugin is loaded but missing the fetcher configuration needed for full git status display in the file list.

## Keybindings

### Default Keybindings in Use

Since no `keymap.toml` exists, yazi is using all default keybindings. Key defaults include:

**Navigation:**
- Arrow keys or `h/j/k/l` - Navigate left/down/up/right
- `g` then `g` - Go to top
- `G` - Go to bottom
- `[` / `]` - Jump to previous/next sibling directory

**File Operations:**
- `o` - Open file
- `enter` / `l` - Enter directory or open file
- `y` - Yank (copy) files
- `x` - Cut files
- `p` - Paste files
- `d` - Delete files
- `r` - Rename file
- `c` then `w` - Create file/directory

**Selection:**
- `space` - Toggle selection
- `v` - Enter visual mode
- `V` - Enter visual mode (unset)
- `Ctrl-a` - Select all

**View:**
- `z` then `h` - Toggle hidden files
- `z` then `z` - Zoom preview
- `tab` - Switch tabs
- `t` - Create new tab
- `1-9` - Switch to tab N

**Help:**
- `~` or `F1` - Show help/keybindings

**Exit:**
- `q` - Quit and change CWD (when using shell wrapper)
- `Q` - Quit without changing directory

### Custom Keybinding Opportunities

**Missing custom keybindings** for:
- Quick access to development directories
- Integration with external tools (editor, git UI, etc.)
- Custom file operations
- Plugin-specific shortcuts

## Plugins

### Currently Installed Plugins

1. **git.yazi** (yazi-rs/plugins:git)
   - **Version**: rev 7ca66b4
   - **Status**: PARTIALLY CONFIGURED
   - **Function**: Shows git status in file list as linemode
   - **Issue**: Loaded in init.lua but missing fetcher configuration in yazi.toml
   - **Required Fix**: Add to yazi.toml:
     ```toml
     [[plugin.prepend_fetchers]]
     id   = "git"
     name = "*"
     run  = "git"

     [[plugin.prepend_fetchers]]
     id   = "git"
     name = "*/"
     run  = "git"
     ```

2. **glow.yazi** (Reledia/glow)
   - **Version**: rev bd3eaa5
   - **Status**: PROPERLY CONFIGURED
   - **Function**: Preview markdown files using glow renderer
   - **Note**: Plugin is deprecated in favor of piper.yazi but still functional
   - **Dependency**: Requires glow binary (installed: v2.1.1)
   - **Enhancement**: Could add scroll keybindings to keymap.toml:
     ```toml
     prepend_keymap = [
         { on = ["<C-e>"], run = "seek 5" },
         { on = ["<C-y>"], run = "seek -5" },
     ]
     ```

### Plugin Installation Method

Both plugins installed via yazi's package manager (`ya pkg add <plugin>`).

## Preview Capabilities

### Currently Configured

- **Markdown files** (*.md): glow previewer (terminal-rendered markdown)

### Built-in Support (Available but Not Custom Configured)

Yazi includes native preview support for:

**Images:**
- PNG, JPG, GIF, SVG, WebP, AVIF, HEIF, JPEG XL
- Multiple protocols: Sixel, iTerm2, Kitty
- Integration with Überzug++ and Chafa for terminal compatibility

**Videos:**
- Automatic thumbnail generation using ffmpeg
- Frame extraction and metadata display

**Documents:**
- PDF files
- EPUB files

**Code/Text:**
- Syntax highlighting for source code files (via syntect)
- Built-in code highlighting

**Archives:**
- ZIP, TAR, RAR and many other formats
- Preview contents before extraction

**Directories:**
- Nested directory previews

### Preview Plugins Available (Not Installed)

**High Value:**
- **duckdb.yazi**: CSV/TSV, JSON, Parquet files with data type summary
- **mediainfo.yazi**: Detailed metadata for images, audio, video (width, height, duration, codec, etc.)
- **office.yazi**: Office documents (.docx, .xlsx, .pptx) via LibreOffice

**Medium Value:**
- **miller.yazi**: Advanced CSV preview
- **f3d-preview.yazi**: 3D objects (STL, STEP, 3MF, OBJ)
- **hevi.yazi**: Hex viewer for binary files and Windows executables

**Development-Specific:**
- **rich-preview.yazi**: Multiple file types using rich library

## Integration Opportunities

### Currently Active Integrations

1. **Git Integration** (partial)
   - Shows git file status in file list
   - Needs fetcher configuration to be fully functional

2. **Glow Integration** (active)
   - Markdown preview in terminal
   - Works well for documentation

### Missing Integration Opportunities

**HIGH PRIORITY:**

1. **Editor Integration**
   - Open files in preferred editor (vim/nvim/helix/etc)
   - Could configure default opener or keybinding
   - Consider yazi.nvim for Neovim users

2. **Git UI Integration**
   - **lazygit.yazi**: Quick access to lazygit from yazi
   - Manage repositories without leaving file manager
   - Key benefit: Seamless git workflow

3. **Search/Navigation Enhancement**
   - **zoxide integration**: Jump to frequently used directories
   - **fzf integration**: Fuzzy finding within yazi
   - Built-in support exists, needs configuration

4. **Archive Management**
   - **ouch.yazi**: Better archive handling (preview + compression)
   - Supports multiple formats with consistent interface

**MEDIUM PRIORITY:**

5. **Bookmark System**
   - **yamb.yazi**: Persistent bookmarks with fuzzy search
   - **bunny.yazi**: Advanced bookmarks with directory history
   - **whoosh.yazi**: Temporary + persistent bookmarks with fzf

6. **Remote Access**
   - **sshfs.yazi**: Mount SSH/SFTP locations
   - **gvfs.yazi**: MTP devices (Android), SMB, NFS, FTP, Google Drive

7. **Enhanced Navigation**
   - **keyjump**: Hop-style jumping to lines by hint character
   - **searchjump**: Flash.nvim-style search with jump labels
   - **fast-enter.yazi**: Auto-decompress archives, enter deepest directory

8. **File Operations**
   - **what-size.yazi**: Calculate directory sizes
   - **sudo.yazi**: Execute operations with sudo
   - **compress.yazi**: Compress selected files to archive

**LOW PRIORITY:**

9. **UI Customization**
   - **yatline**: Customize header and status lines
   - **full-border.yazi**: Add full borders for aesthetics
   - Theme system customization via theme.toml

10. **Tagging System**
    - **mactag.yazi**: macOS-style tags (macOS only)
    - **simple-tag.yazi**: Cross-platform tagging

### Shell Wrapper Integration

**Status**: Not verified

Yazi provides shell wrapper scripts for:
- Changing directory on exit (cd where you quit)
- Available for: bash, zsh, fish, nushell, PowerShell

**Recommendation**: Verify if shell wrapper is configured in `~/.bashrc` or `~/.zshrc`

## Recommendations

### HIGH Priority (Immediate Impact)

1. **Fix Git Plugin Configuration**
   - **Action**: Add fetcher configuration to yazi.toml
   - **Impact**: Enable full git status display in file list (modified, added, deleted files)
   - **Effort**: 5 minutes
   - **Files**: Edit `/home/benjamin/.config/yazi/yazi.toml`

2. **Install lazygit.yazi Plugin**
   - **Action**: `ya pkg add yazi-rs/plugins:lazygit`
   - **Impact**: Quick access to git operations without leaving yazi
   - **Effort**: 5 minutes + keybinding setup
   - **Benefit**: Streamlines git workflow significantly

3. **Create Custom Keymap Configuration**
   - **Action**: Create `~/.config/yazi/keymap.toml` with essential shortcuts
   - **Impact**: Faster navigation, better workflow integration
   - **Effort**: 30 minutes
   - **Suggested Additions**:
     - Glow scroll controls (Ctrl-e/Ctrl-y)
     - Lazygit shortcut (e.g., `<C-g>`)
     - Quick bookmarks (g+h for home, g+p for projects, etc.)
     - Editor integration shortcut

4. **Install Enhanced Preview Plugins**
   - **Action**: Install duckdb.yazi and mediainfo.yazi
   - **Impact**: Better data file preview (CSV, JSON) and media metadata
   - **Effort**: 10 minutes
   - **Commands**:
     ```bash
     ya pkg add yazi-rs/plugins:duckdb
     ya pkg add yazi-rs/plugins:mediainfo
     ```

5. **Verify Shell Wrapper Installation**
   - **Action**: Check if yazi shell wrapper is configured in shell RC file
   - **Impact**: Directory changes persist after quitting yazi
   - **Effort**: 5 minutes review, 10 minutes setup if missing

### MEDIUM Priority (Quality of Life)

6. **Install Bookmark Plugin**
   - **Action**: Install yamb.yazi or whoosh.yazi
   - **Impact**: Quick navigation to frequent directories
   - **Effort**: 15 minutes (install + configure bookmarks)
   - **Alternative**: Use zoxide integration if already using zoxide

7. **Install Archive Plugin**
   - **Action**: `ya pkg add yazi-rs/plugins:ouch`
   - **Impact**: Better archive handling (preview contents, extract, compress)
   - **Effort**: 10 minutes
   - **Dependency**: Install ouch binary

8. **Configure File Opener Defaults**
   - **Action**: Set up preferred applications in yazi.toml
   - **Impact**: Files open in preferred applications
   - **Effort**: 20 minutes
   - **Configure**: Text files → editor, PDFs → viewer, etc.

9. **Install Navigation Enhancers**
   - **Action**: Install smart-enter.yazi or fast-enter.yazi
   - **Impact**: Fewer keystrokes to navigate archives and deep directories
   - **Effort**: 10 minutes
   - **Command**: `ya pkg add yazi-rs/plugins:smart-enter`

10. **Add File Size Calculator**
    - **Action**: Install what-size.yazi
    - **Impact**: Know directory sizes before operations
    - **Effort**: 10 minutes
    - **Useful for**: Cleanup, disk management

### LOW Priority (Nice to Have)

11. **Create Custom Theme**
    - **Action**: Create `~/.config/yazi/theme.toml`
    - **Impact**: Visual customization, better color scheme
    - **Effort**: 1-2 hours for custom design
    - **Alternative**: Install existing flavor from awesome-yazi

12. **Install UI Enhancement Plugins**
    - **Action**: Install yatline, full-border.yazi
    - **Impact**: Aesthetic improvements
    - **Effort**: 30 minutes
    - **Priority**: Only if visual customization is desired

13. **Remote Filesystem Support**
    - **Action**: Install sshfs.yazi or gvfs.yazi
    - **Impact**: Manage remote files from yazi
    - **Effort**: 30 minutes + dependency setup
    - **Use Case**: Only if regularly accessing remote systems

14. **Advanced Navigation Plugins**
    - **Action**: Install keyjump or searchjump
    - **Impact**: Faster navigation with jump hints
    - **Effort**: 15 minutes
    - **Learning Curve**: Requires learning new keybindings

### Implementation Order

**Week 1:**
1. Fix git plugin (5 min)
2. Verify shell wrapper (15 min)
3. Install lazygit.yazi (5 min)
4. Create basic keymap.toml (30 min)
5. Install preview plugins: duckdb, mediainfo (10 min)

**Week 2:**
6. Install bookmark plugin (15 min)
7. Install ouch.yazi (10 min)
8. Configure file openers (20 min)
9. Install smart-enter (10 min)

**Week 3+:**
10. Theme customization (as desired)
11. Remote filesystem support (if needed)
12. Advanced navigation plugins (if interested)

## Resources

### Official Documentation
- [Yazi Official Website](https://yazi-rs.github.io/)
- [Configuration Guide](https://yazi-rs.github.io/docs/configuration/overview/)
- [Keymap Configuration](https://yazi-rs.github.io/docs/configuration/keymap/)
- [Plugin Documentation](https://yazi-rs.github.io/docs/plugins/overview/)

### Plugin Resources
- [awesome-yazi Repository](https://github.com/AnirudhG07/awesome-yazi)
- [Official Plugins Repository](https://github.com/yazi-rs/plugins)
- [Yazi Resources Page](https://yazi-rs.github.io/docs/resources/)

### Community Resources
- [Yazi GitHub Repository](https://github.com/sxyazi/yazi)
- [5 Essential Plugins for Yazi](https://nerdpress.org/2025/11/08/5-essential-plugins-for-yazi-file-manager/)
- [Yazi Keyboard Shortcuts Reference](https://kb.adamsdesk.com/application/yazi-keyboard-shortcuts/)
- [Yazi Cheat Sheet - Rico Berger](https://ricoberger.de/cheat-sheets/yazi/)

### Integration Guides
- [yazi.nvim - Neovim Plugin](https://github.com/mikavilpas/yazi.nvim)
- [Setting up Yazi File Manager](https://www.markpitblado.me/blog/setting-up-the-yazi-file-manager/)
- [How To Use Yazi File Manager](https://www.josean.com/posts/how-to-use-yazi-file-manager)

## Sources

- [GitHub - sxyazi/yazi](https://github.com/sxyazi/yazi)
- [5 Essential Plugins for Yazi File Manager | Nerdpress.org](https://nerdpress.org/2025/11/08/5-essential-plugins-for-yazi-file-manager/)
- [Yazi Resources](https://yazi-rs.github.io/docs/resources/)
- [GitHub - AnirudhG07/awesome-yazi](https://github.com/AnirudhG07/awesome-yazi)
- [GitHub - yazi-rs/plugins](https://github.com/yazi-rs/plugins)
- [Yazi Keyboard Shortcuts Quick Reference - Adamsdesk KB](https://kb.adamsdesk.com/application/yazi-keyboard-shortcuts/)
- [keymap.toml | Yazi](https://yazi-rs.github.io/docs/configuration/keymap/)
- [Quick Start | Yazi](https://yazi-rs.github.io/docs/quick-start/)
- [Yazi - Cheat Sheet - Rico Berger](https://ricoberger.de/cheat-sheets/yazi/)
- [yazi.toml | Yazi](https://yazi-rs.github.io/docs/configuration/yazi/)
- [How To Use The Amazing & Fast Yazi Terminal File Manager](https://www.josean.com/posts/how-to-use-yazi-file-manager)
- [Setting up the Yazi file manager](https://www.markpitblado.me/blog/setting-up-the-yazi-file-manager/)
- [GitHub - mikavilpas/yazi.nvim](https://github.com/mikavilpas/yazi.nvim)
