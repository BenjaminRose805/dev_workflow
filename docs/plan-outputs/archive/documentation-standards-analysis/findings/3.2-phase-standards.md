# 3.2 Phase Standards Analysis

**Status:** completed
**Started:** 2025-12-25
**Summary:** Mapped all documents defining phase standards, identified the authoritative source, documented current standards, and found 10 gaps and 3 conflicts.

---

## Documents Defining Phase Standards

### Implementation Plan Standards (PRIMARY AUTHORITY)
- **Path**: `docs/standards/implementation-plan-standards.md`
- **Purpose**: The authoritative standards document for all implementation plans. Defines standards for consistency, automation, and maintainability.
- **Phase requirements defined**:
  - Phase numbering rules
  - Phase structure format
  - VERIFY section requirements
  - Task naming and numbering conventions

### Plan Template Format Documentation
- **Path**: `docs/plan-templates/TEMPLATE.md`
- **Purpose**: Describes format and conventions for plan templates used with `/plan:create`. Defines template variable substitution.
- **Phase requirements defined**:
  - Generic phase structure format
  - Phase variable placeholders ({{phase_N_title}}, {{phase_N_objective}})
  - Task numbering format (N.1, N.2, N.2.1, N.2.2)
  - VERIFY phase structure

### Canonical Command Template
- **Path**: `docs/plan-templates/CANONICAL-COMMAND-TEMPLATE.md`
- **Purpose**: Meta template showing the recommended structure for implementation command plans. Demonstrates Phase 1-6 for command implementation.
- **Phase requirements defined**:
  - Standard phases for command implementation (Infrastructure, Design, Sub-commands, Artifacts, Testing, Documentation)
  - Task numbering within phases
  - VERIFY requirements per phase

### Template Examples (analysis.md, validation.md)
- **Path**: `docs/plan-templates/analysis.md`, `docs/plan-templates/validation.md`
- **Purpose**: Concrete examples showing phase structures for different plan types
- **Phase requirements defined**:
  - Discovery → Deep Analysis → Synthesis → Verification (analysis)
  - Static → Behavioral → Integration → Sign-off (validation)
  - Pre-Validation Checklist structure (Phase 0)

### Markdown Parser (Implementation)
- **Path**: `scripts/lib/markdown-parser.js`
- **Purpose**: JavaScript parser that extracts phases, tasks, and structure from markdown files
- **Phase requirements defined**: Regex pattern for phase detection: `^##\s*Phase\s*(\d+):\s*(.+)$`

### Plan Status Library (Implementation)
- **Path**: `scripts/lib/plan-status.js`
- **Purpose**: Unified API for plan execution status management, phase parsing, and task tracking
- **Phase requirements defined**: Phase structure matching, task-to-phase association, currentPhase state tracking

---

## Authoritative Source Analysis

**THE AUTHORITATIVE DOCUMENT IS: `docs/standards/implementation-plan-standards.md`**

This document is the source of truth because:

1. **Explicit Declaration**: Lines 1-7 state "This document defines the authoritative standards for all implementation plans"
2. **Comprehensive Coverage**: It defines naming conventions, priority levels, quality targets, and complete plan structure
3. **Active Reference**: Other documents (TEMPLATE.md, schemas, etc.) reference this document
4. **Implementation Alignment**: The JavaScript parsing code (markdown-parser.js, plan-status.js) implements the standards defined here
5. **Version Control**: Marked as "Version: 1.0" with "Last Updated: 2025-12-23"

---

## Current Phase Standards (as documented)

### Required Elements

According to implementation-plan-standards.md, each phase MUST have:

1. **Phase Header**: `## Phase N: [Descriptive Title]`
   - Must be level-2 heading
   - Must include number N (starting from 0 or 1)
   - Must include descriptive title

2. **Objective Statement**: `**Objective:** [What this phase accomplishes]`
   - Must be present and clearly state phase goals
   - Required before task list

3. **Tasks**: `- [ ] N.M [Task description]`
   - Checkbox format (incomplete: `[ ]`, complete: `[x]`)
   - Required ID format: N.M for task M in phase N (e.g., 1.1, 1.2, 2.1)
   - Optional subtasks: N.M.1, N.M.2 format

4. **VERIFY Section**: `**VERIFY Phase N:**`
   - Must appear after all tasks in the phase
   - Must contain specific, measurable verification criteria
   - Each criterion must be on separate checkbox line
   - Format: `- [ ] [Specific, testable criterion]`

### Numbering Conventions

**Phase Numbering**:
- Start at 0 for prerequisites/foundation work
- Continue 1, 2, 3... for sequential phases
- Format: `## Phase N: Title`

**Task Numbering**:
- Phase-level tasks: `N.1`, `N.2`, `N.3`
- Subtasks: `N.M.1`, `N.M.2`, `N.M.3`
- Example task hierarchy:
  ```
  - [ ] 1.1 Task description
    - [ ] 1.1.1 Subtask
    - [ ] 1.1.2 Subtask
  - [ ] 1.2 Another task
  ```

**Phase 0 Convention**:
- Phase 0 is explicitly designated for prerequisites
- Optional - used when foundational setup is needed before Phase 1
- Examples in codebase show both Phase 0 → Phase 1 → ... and Phase 1 → Phase 2 → ... patterns

### Naming Conventions

**Phase Title Format**:
- Descriptive, action-oriented titles
- Examples from templates: "Discovery", "Deep Analysis", "Keyboard Foundation", "Command Infrastructure"
- Guidelines: Should clearly communicate what the phase accomplishes

**Task Description Format**:
- Start with action verb (Create, Implement, Add, Fix, Write, Review)
- Be specific and measurable
- Avoid vague language
- Support priority markers: (CRITICAL), (HIGH), (MEDIUM), (LOW) - optional

**File Names**:
- Plans: kebab-case (e.g., `implement-explore-command.md`)
- Output directories: kebab-case (e.g., `docs/plan-outputs/tui-integration-implementation/`)

### Dependency Rules

**Internal dependency rules for sub-commands**:
1. P0 sub-commands within a command can depend on each other but not on P1/P2
2. P1 sub-commands can depend on P0 and other P1 sub-commands
3. P2 sub-commands can depend on any lower-priority sub-commands
4. **Shared infrastructure phases should be implemented before any sub-commands**

**Priority dependency rules**:
- A command's priority must be ≤ its dependencies
- P0 commands cannot depend on P1 or P2
- P1 commands cannot depend on P2
- Document exceptions with rationale

### Other Requirements

**VERIFY Section Standards**:
- Placement: After each phase's tasks
- Format: `**VERIFY Phase N:**` followed by checklist items
- **Do:**
  - Make criteria specific and measurable
  - Include success metrics where applicable
  - Reference specific files or commands to verify
- **Don't:**
  - Use vague language ("works correctly")
  - Skip verification for any phase
  - Use inline verification within tasks

**Task Completion State** (from plan-status.js):
- Valid statuses: `pending`, `in_progress`, `completed`, `failed`, `skipped`
- Task ID format: stored as string (e.g., "1.1", "2.3", "1.2.1")
- Each task tracks: id, phase, description, status, timestamps, duration

**Phase State Tracking** (from plan-status.js):
- Current phase: tracked in status.json as `currentPhase` string
- Format: `"Phase N: Title"` (e.g., "Phase 1: Infrastructure Setup")
- Updated during execution to track progress

---

## Gaps Identified

### 1. No Clear Standards for Phase Objectives
**Gap**: While Phase Objectives are required, there is no documented standard for WHAT they should contain or HOW detailed they should be.
**Impact**: Objectives vary widely in quality and specificity across plans.

### 2. Optional Phase 0 Not Clearly Marked as Optional
**Gap**: Phase 0 is mentioned as option for prerequisites but not clearly documented as optional vs. required.
**Impact**: Inconsistency in whether plans use Phase 0 or start with Phase 1.
**Guidance Needed**: When to use Phase 0 vs. starting with Phase 1.

### 3. No Sub-Task Depth Limit Specified
**Gap**: While N.M.1, N.M.2 format is shown, there's no documented limit on nesting depth.
**Impact**: Could theoretically have N.M.K.P... (unlimited nesting). No guidance on when subtasks are appropriate.

### 4. VERIFY Criterion Writing Standards Are Vague
**Gap**: While "good examples" are provided, the guidance is general. "Specific and measurable" is subjective.
**Impact**: No quantitative definition provided. No guidance on number of verification criteria per phase.

### 5. No Standards for Phase Duration or Size
**Gap**: No documented limits on:
- How many tasks should a phase contain?
- What is the target time/effort per phase?
- What signals a phase is too large and should be split?

**Evidence**: Actual plans show phases with 1-7 tasks, but no standard defined.

### 6. Task ID Format Flexibility Not Documented
**Gap**: Task ID format allows but doesn't clearly define:
- Whether task IDs must be numeric
- Whether non-sequential IDs are allowed (e.g., skip 1.2 and go to 1.4?)
- Whether task IDs must use dot notation exclusively

### 7. No Standards for Inline vs. Separate Documentation
**Gap**: Unclear when phase objectives/descriptions should be:
- Inline in the phase header (current standard)
- Part of a separate description section
- In external task findings

### 8. Status Tracking Not Mentioned in Standards
**Gap**: implementation-plan-standards.md focuses on plan STRUCTURE but doesn't reference:
- The status.json execution tracking system
- How phases map to execution state
- That markdown plans are "read-only reference" while status.json is "authoritative"

**Impact**: Gap between documentation standards and execution reality.

### 9. Sub-Command Phases Not Fully Specified
**Gap**: Guidance exists for sub-command priority but not clear phase structure:
- Should sub-commands each have their own phases?
- Can phases contain multiple sub-commands or must they be separated?

### 10. No Standards for Phase Interdependencies
**Gap**: While task-level dependencies are mentioned, there are no documented standards for:
- Can phases have dependencies? (e.g., must Phase 1 complete before Phase 2 starts?)
- How should blocked phases be indicated?
- What happens if a phase fails - do subsequent phases wait or proceed?

---

## Conflicts Found

### 1. Phase 0 vs. Starting with Phase 1
**Conflict**: Two different patterns exist in actual plans:
- **Pattern A** (validation.md template): Uses "Pre-Validation Checklist" (no phase number) then Phase 1
- **Pattern B** (Other templates): Start directly with Phase 1
- **Pattern C** (implementation-plan-standards.md): Explicitly mentions Phase 0 as option for prerequisites

**Impact**: Creates ambiguity - should prerequisites be Phase 0 or a separate unnumbered section?

### 2. Markdown vs. JSON Authority
**Conflict**: Two systems track phase information:
- **Markdown (plans)**: `## Phase N: Title` format defined in implementation-plan-standards.md
- **JSON (status.json)**: Phase tracked as `"currentPhase": "Phase N: Title"` with different schema

**Statement from plan-status.js**: "status.json is THE authoritative source of truth for execution state."

**Gap**: Implementation plan standards document doesn't acknowledge this JSON/Markdown duality or define how they relate.

### 3. VERIFY Section Exact Format
**Conflict**: Three slightly different formats shown:
- **standards.md**: `**VERIFY Phase N:**` with checklist below
- **CANONICAL-COMMAND-TEMPLATE.md**: `**VERIFY 3.1:**` (using task ID instead of phase)
- **analysis.md template**: `- [ ] **VERIFY 1**: Phase verification` (inline with tasks)

**Evidence**: The markdown-parser.js doesn't explicitly parse VERIFY sections - it parses phases and tasks separately.

---

## Summary of Authoritative Standards

**Single Source of Truth**: `docs/standards/implementation-plan-standards.md` (Section: Plan Structure)

**Phase Structure (Required)**:
- Header: `## Phase N: Title`
- Objective: `**Objective:** [description]`
- Tasks: `- [ ] N.M Description` or with subtasks
- Verification: `**VERIFY Phase N:**` with checklist items

**Phase Numbering**:
- Optional Phase 0 for prerequisites
- Continue 1, 2, 3...
- Task IDs: N.1, N.2, etc.; Subtasks: N.M.1, N.M.2

**Verification Requirement**:
- Every phase must have VERIFY section
- Criteria must be specific, measurable, and testable
- At least one criterion recommended

**Status Tracking** (secondary source: plan-status.js):
- Phases stored as `"Phase N: Title"` in status.json
- Tasks tracked with id, phase, description, status, timestamps
- Markdown is reference; status.json is authoritative execution state

---

## Summary Table

| Category | Status | Details |
|----------|--------|---------|
| **Authoritative Source** | ✓ Clear | `implementation-plan-standards.md` (v1.0) is the authority |
| **Required Elements** | ✓ Well-Defined | Header, Objective, Tasks, VERIFY |
| **Numbering Conventions** | ✓ Well-Defined | Phase 0/1/2/3..., Tasks N.1/N.2, Subtasks N.M.1 |
| **Naming Conventions** | ✓ Well-Defined | Descriptive, action-oriented titles |
| **VERIFY Requirements** | ✓ Well-Defined | Required for each phase, must be measurable |
| **Phase Objectives** | ⚠ Gap | No quality/content standards |
| **Phase 0 Usage** | ⚠ Gap | Not clearly documented as optional |
| **Subtask Depth** | ⚠ Gap | No limit specified |
| **Phase Size** | ⚠ Gap | No guidance on task count per phase |
| **Phase Dependencies** | ⚠ Gap | No standards for inter-phase dependencies |
| **Status Tracking** | ⚠ Gap | Standards don't reference status.json |
