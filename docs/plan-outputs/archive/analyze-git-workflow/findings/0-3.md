# Task 0.3: Catalog of Git-Related Touchpoints in the System

## Overview

This catalog documents every location in the system where git is referenced, used, or could be integrated. Organized by category with file paths and line numbers for easy navigation.

## 1. Current Git Commands/Scripts

### 1.1 Primary Git Touchpoints (Active Use)

| File | Lines | Purpose |
|------|-------|---------|
| `.claude/commands/plan/implement.md` | 432-481 | **Task commit workflow** - git add, commit after task completion |
| `.claude/commands/plan/verify.md` | 306, 502-519 | **Debugging hints** - suggests git log for troubleshooting |
| `docs/plans/cleanup-deprecated-code.md` | 45, 52, 230, 243 | **Manual checkpoint** - "Create git commit", "Git state is clean" |

### 1.2 Agent Templates (Capability Declaration)

| File | Line | Content |
|------|------|---------|
| `.claude/templates/agents/research-agent.md` | 9 | "Execute commands (npm, git, etc.)" |
| `.claude/templates/agents/analysis-agent.md` | 9 | "Execute commands (npm, git, etc.)" |
| `.claude/templates/agents/verify-agent.md` | 9 | "Execute commands (npm, git, etc.)" |
| `.claude/templates/agents/architecture-analysis.md` | 9 | "Execute commands (npm, git, etc.)" |

### 1.3 Config Files

| File | Line | Content |
|------|------|---------|
| `.claude/config-schema.json` | 183 | Default ignore: `["node_modules", ".git", "dist", "build"]` |
| `package.json` | 13-14 | Repository type: "git", URL to GitHub |

## 2. Future Implementation Plans (Planned Git Features)

### 2.1 Review Command (`implement-review-command.md`)

| Lines | Feature |
|-------|---------|
| 16, 182 | `review:diff` - Git diff analysis |
| 39, 141 | Git diff parsing for changed lines |
| 492, 654 | Phase 5: Git hooks (pre-commit, pre-push) |

### 2.2 Deploy Command (`implement-deploy-command.md`)

| Lines | Feature |
|-------|---------|
| 31, 40 | Git integration for branch/status validation |
| 73 | Git status validator (no uncommitted changes) |
| 382 | Pre-flight git status validation |

### 2.3 Deploy Agent (`implement-deploy-agent.md`)

| Lines | Feature |
|-------|---------|
| 29, 142-144 | Git status validation (uncommitted/unpushed) |
| 392 | Include git context in deployment logs |
| 545 | Pre-flight git status checks |

### 2.4 Release Command (`implement-release-command.md`)

| Lines | Feature |
|-------|---------|
| 15, 142 | `release:tag` - Git tag creation with GPG signing |
| 17, 166 | `release:validate` - Git status validation |
| 207, 332, 417 | Git tag verification and section generation |

### 2.5 Document Command (`implement-document-command.md`)

| Lines | Feature |
|-------|---------|
| 21, 38, 45, 109 | `document:changelog` - Generate from Git history |
| 179, 291, 452 | Parse Git history with conventional commits |

### 2.6 Refactor Command (`implement-refactor-command.md`)

| Lines | Feature |
|-------|---------|
| 44, 70 | Git stashing/branching for automatic rollback |
| 334 | Compatible with git development tools |

### 2.7 Template Command (`implement-template-command.md`)

| Lines | Feature |
|-------|---------|
| 90 | System variables: `{{git.user.name}}` |

### 2.8 Context Loading Hook (`implement-context-loading-hook.md`)

| Lines | Feature |
|-------|---------|
| 150, 163 | Git context detector (branch, commit, clean status) |
| 158, 168 | Warn about dirty git state |
| 248 | Cache invalidation on git state change |

### 2.9 Error Recovery Hooks (`implement-error-recovery-hooks.md`)

| Lines | Feature |
|-------|---------|
| 108, 232 | Rollback generators for git operations |
| 120 | Verify rollback with git status |

### 2.10 Analyze Command (`implement-analyze-command.md`)

| Lines | Feature |
|-------|---------|
| 506 | Git branch-based baselines |

### 2.11 Analyze Agent (`implement-analyze-agent.md`)

| Lines | Feature |
|-------|---------|
| 103, 416 | Pass git context to agent |
| 149 | Git-based scoping (changed-files, branch-diff, commit-range) |

### 2.12 Review Agent (`implement-review-agent.md`)

| Lines | Feature |
|-------|---------|
| 49, 353 | Run git diff to identify changed files |
| 61, 279 | Auto-trigger on git operations (commit, push, PR) |
| 413, 427 | Mock git diff for testing |

### 2.13 Debug Agent (`implement-debug-agent.md`)

| Lines | Feature |
|-------|---------|
| 200 | Identify recent changes via git log |

### 2.14 Fix Command (`implement-fix-command.md`)

| Lines | Feature |
|-------|---------|
| 39 | Git for backup/rollback functionality |

### 2.15 Debug Command (`implement-debug-command.md`)

| Lines | Feature |
|-------|---------|
| 40 | Git for change history analysis |

### 2.16 Explain Command (`implement-explain-command.md`)

| Lines | Feature |
|-------|---------|
| 23, 35, 43 | `explain:diff` - Explain Git diffs and PR changes |
| 280, 352, 445 | Analyze Git history and parse diffs |

### 2.17 Architect Command (`implement-architect-command.md`)

| Lines | Feature |
|-------|---------|
| 45 | Git for ADR version tracking |

### 2.18 Migrate Command (`implement-migrate-command.md`)

| Lines | Feature |
|-------|---------|
| 32, 42 | Git integration for version control |

### 2.19 Artifact Registry (`implement-artifact-registry.md`)

| Lines | Feature |
|-------|---------|
| 195 | Exclude .git from artifact scanning |

## 3. TUI/Workflow Integration

### 3.1 TUI Development Workflow Enhancement (`tui-dev-workflow-enhancement.md`)

| Lines | Feature |
|-------|---------|
| 30-39 | Git configuration (delta pager, yazi git plugin) |
| 69-71 | fzf-git integration |
| 83-88 | Git aliases (st, co, br, lg, unstage) |
| 104, 106, 108 | Shell aliases (eza with git, git shortcuts) |
| 154-175 | Verification: git diff, lazygit, fzf-git keybindings |

### 3.2 TUI Analysis (`tui-dev-workflow-analysis.md`)

| Lines | Feature |
|-------|---------|
| 22 | Task 2.4: Analyze git workflow tools (lazygit) |

## 4. Current Git Analysis Plan

The plan being analyzed (`analyze-git-workflow.md`) itself documents git touchpoints:

| Lines | Description |
|-------|-------------|
| 1-8 | Objective: git workflow for orchestration |
| 14-17 | Phase 0 tasks (current state analysis) |
| 62, 87, 97, 103 | Extensions, evaluation, best practices, performance |

## 5. Missing Git Touchpoints (Gaps)

Based on this catalog, the following areas currently have NO git integration but should:

| Component | Missing Integration |
|-----------|---------------------|
| `/plan:set` | No branch switching when changing plans |
| `/plan:batch` | No batch commit after phase completion |
| `/plan:orchestrate` | No git lifecycle management |
| `status-cli.js` | No git state tracking |
| `plan_orchestrator.py` | No git awareness |
| `/plan:create` | No branch creation for new plans |
| `/plan:archive` | No merge/cleanup after plan completion |

## 6. Summary Statistics

| Category | Count | Primary Files |
|----------|-------|---------------|
| Active git commands | 3 | implement.md, verify.md, cleanup plan |
| Agent capability declarations | 4 | templates/agents/*.md |
| Future feature plans | 19+ | docs/plans/*.md |
| TUI/workflow integration | 15+ | tui-*.md |
| Missing touchpoints | 7 | Core orchestration commands |

## 7. Integration Opportunities

Based on this catalog, git integration opportunities exist in:

1. **Automatic commits** - implement.md has the pattern, extend to all commands
2. **Branch management** - /plan:set, /plan:create, /plan:archive
3. **Context injection** - context-loading-hook already planned
4. **Rollback support** - error-recovery-hooks already planned
5. **Status tracking** - status-cli.js could include git state
6. **Pre-flight validation** - deploy/release commands have patterns
7. **Diff-based triggers** - review agent patterns
