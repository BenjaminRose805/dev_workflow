# Task 11.1: Prioritize Expansions by Value/Effort Ratio

**Date:** 2025-12-26
**Purpose:** Create priority matrix for all expansion designs
**Inputs:** Tasks 10.1-10.7 designs, Task 9.5 complexity matrix

---

## Executive Summary

This analysis creates a priority matrix ranking 7 panel designs by value/effort ratio, considering dependencies between expansions and strategic alignment with the existing TUI plan.

---

## 1. Expansion Summary

### 1.1 Panel Designs from Phase 10

| Panel | Task | Effort (hrs) | Description |
|-------|------|--------------|-------------|
| Git Status Panel | 10.1 | 12-26 | Branch, uncommitted, stash, archive |
| Parallel Execution Dashboard | 10.2 | 20-29 | Sessions, conflicts, commit queue, constraints |
| Task Constraint Panel | 10.3 | 16-24 | Why tasks are sequential, overrides |
| Orchestrator Control Panel | 10.4 | 36-46 | Pause/resume, batch size, retry, stuck |
| Multi-Plan View | 10.5 | 33-57 | Plan switcher, dashboard, comparison |
| Real-time Event Stream | 10.6 | 34-44 | Event bus, filtering, event cards |
| Batch Execution Panel | 10.7 | 16-23 | Current batch, explainer, controls |

### 1.2 Quick Win Features from Task 9.5

19 features totaling ~36 hours, all < 4 hours each.

---

## 2. Value Assessment

### 2.1 Value Criteria

| Criterion | Weight | Description |
|-----------|--------|-------------|
| User Need | 30% | How often do users ask "why is this happening?" |
| Debug Value | 25% | Helps identify and resolve issues |
| Trust | 20% | Builds confidence in orchestrator decisions |
| Productivity | 15% | Reduces context switching |
| Uniqueness | 10% | Not available elsewhere |

### 2.2 Value Scores

| Panel | User Need | Debug | Trust | Productivity | Unique | **Total** |
|-------|-----------|-------|-------|--------------|--------|-----------|
| Orchestrator Control | 9 | 10 | 8 | 9 | 9 | **8.95** |
| Task Constraint | 10 | 9 | 10 | 7 | 8 | **8.90** |
| Batch Execution | 8 | 9 | 10 | 7 | 7 | **8.30** |
| Git Status | 8 | 7 | 6 | 9 | 4 | **7.00** |
| Parallel Dashboard | 7 | 8 | 7 | 6 | 8 | **7.15** |
| Event Stream | 6 | 9 | 6 | 5 | 7 | **6.60** |
| Multi-Plan View | 5 | 5 | 5 | 7 | 9 | **5.80** |

---

## 3. Effort Assessment

### 3.1 Effort Components

| Component | Description |
|-----------|-------------|
| Core Implementation | Panel class, rendering, data loading |
| Infrastructure | IPC, event bus, new data sources |
| Integration | TUI layout, keyboard, data sharing |
| Testing | Edge cases, performance |

### 3.2 Effort Scores (normalized 1-10, lower = easier)

| Panel | Core | Infra | Integration | Testing | **Total** |
|-------|------|-------|-------------|---------|-----------|
| Git Status | 3 | 1 | 2 | 2 | **2.0** |
| Batch Execution | 4 | 2 | 2 | 2 | **2.5** |
| Task Constraint | 4 | 2 | 3 | 3 | **3.0** |
| Parallel Dashboard | 5 | 4 | 3 | 3 | **3.75** |
| Event Stream | 5 | 7 | 4 | 4 | **5.0** |
| Orchestrator Control | 6 | 8 | 5 | 5 | **6.0** |
| Multi-Plan View | 6 | 5 | 6 | 5 | **5.5** |

---

## 4. Priority Matrix

### 4.1 Value/Effort Calculation

**Formula:** Priority Score = (Value Score × 10) / Effort Score

| Panel | Value | Effort | **Priority Score** | **Rank** |
|-------|-------|--------|-------------------|----------|
| Task Constraint | 8.90 | 3.0 | **29.7** | 1 |
| Batch Execution | 8.30 | 2.5 | **33.2** | 2 |
| Git Status | 7.00 | 2.0 | **35.0** | 3 |
| Orchestrator Control | 8.95 | 6.0 | **14.9** | 4 |
| Parallel Dashboard | 7.15 | 3.75 | **19.1** | 5 |
| Event Stream | 6.60 | 5.0 | **13.2** | 6 |
| Multi-Plan View | 5.80 | 5.5 | **10.5** | 7 |

### 4.2 Priority Visualization

```
                   HIGH VALUE
                       ▲
                       │
    ┌─────────────────┼─────────────────┐
    │                 │                 │
    │   QUICK WINS    │    STRATEGIC    │
    │                 │                 │
    │   Git Status    │   Orchestrator  │
    │   Batch Exec    │   Control       │
    │   Constraint    │                 │
    │                 │                 │
LOW ├─────────────────┼─────────────────┤ HIGH
EFFORT                │                   EFFORT
    │                 │                 │
    │    DEFER        │    CONSIDER     │
    │                 │                 │
    │                 │   Multi-Plan    │
    │                 │   Event Stream  │
    │                 │   Parallel Dash │
    │                 │                 │
    └─────────────────┼─────────────────┘
                       │
                   LOW VALUE
```

---

## 5. Dependency Analysis

### 5.1 Expansion Dependencies

```
Git Status Panel ─────────────────────────────────────────► (standalone)

Task Constraint Panel ────────────────────────────────────► (standalone)
         │
         └───────────────┐
                         ▼
Batch Execution Panel ─► (can use constraint data)
         │
         └───────────────┐
                         ▼
Parallel Dashboard ────► (integrates batch + constraint)

Orchestrator Control ───► IPC Infrastructure ────────────► (new infrastructure)
         │
         └───────────────┐
                         ▼
Event Stream ──────────► EventBus Infrastructure ────────► (new infrastructure)
         │
         └───────────────┐
                         ▼
Multi-Plan View ───────► (depends on worktree support)
```

### 5.2 Dependency Clusters

**Cluster A: Standalone Panels (No Dependencies)**
- Git Status Panel
- Task Constraint Panel

**Cluster B: Constraint-Aware Panels (Depends on A)**
- Batch Execution Panel (benefits from Constraint data)
- Parallel Execution Dashboard (integrates constraint visualization)

**Cluster C: Infrastructure-Heavy (New Components)**
- Orchestrator Control Panel (requires IPC)
- Real-time Event Stream (requires EventBus)

**Cluster D: Advanced Features (Long-term)**
- Multi-Plan View (requires worktree support from Phase 5)

---

## 6. Strategic Alignment

### 6.1 Alignment with TUI Integration Plan

| Expansion | Existing TUI Phase | Alignment |
|-----------|-------------------|-----------|
| Git Status | None (not in plan) | **Extension** |
| Task Constraint | Phase 4 (dependency graph partial) | **Enhancement** |
| Batch Execution | None | **Extension** |
| Orchestrator Control | None | **Extension** |
| Parallel Dashboard | Phase 4 (agent tracker partial) | **Enhancement** |
| Event Stream | None | **Extension** |
| Multi-Plan View | None | **Extension** |

### 6.2 Alignment with Workflow Plans

| Expansion | Git Workflow | Parallel Exec | Orchestrator |
|-----------|-------------|---------------|--------------|
| Git Status | **HIGH** | LOW | LOW |
| Task Constraint | MEDIUM | **HIGH** | MEDIUM |
| Batch Execution | LOW | **HIGH** | **HIGH** |
| Orchestrator Control | MEDIUM | MEDIUM | **HIGH** |
| Parallel Dashboard | LOW | **HIGH** | MEDIUM |
| Event Stream | MEDIUM | MEDIUM | **HIGH** |
| Multi-Plan View | **HIGH** | MEDIUM | MEDIUM |

---

## 7. Final Priority Ranking

### 7.1 Tier 1: Immediate Priority (Start Now)

| Rank | Panel | Score | Rationale |
|------|-------|-------|-----------|
| 1 | **Task Constraint Panel** | 29.7 | High value, explains orchestrator decisions, aids debugging |
| 2 | **Batch Execution Panel** | 33.2 | High value, complements constraint panel, medium effort |
| 3 | **Git Status Panel** | 35.0 | Low effort, immediate user value, standalone |

### 7.2 Tier 2: High Priority (After Tier 1)

| Rank | Panel | Score | Rationale |
|------|-------|-------|-----------|
| 4 | **Orchestrator Control** | 14.9 | Highest absolute value, requires IPC infrastructure |
| 5 | **Parallel Dashboard** | 19.1 | Integrates Tier 1 features, moderate effort |

### 7.3 Tier 3: Future Priority (After Infrastructure)

| Rank | Panel | Score | Rationale |
|------|-------|-------|-----------|
| 6 | **Event Stream** | 13.2 | Requires EventBus, debugging value |
| 7 | **Multi-Plan View** | 10.5 | Depends on worktree support (Phase 5) |

---

## 8. Quick Wins Integration

### 8.1 Quick Wins That Complement Panels

| Quick Win | Effort | Related Panel | Priority |
|-----------|--------|---------------|----------|
| Sequential chain icon (⛓) | 1 hr | Constraint | HIGH |
| Conflict badge (⚠) | 1 hr | Constraint | HIGH |
| Retry badge | 2 hr | Batch/Control | HIGH |
| Branch badge | 2 hr | Git Status | HIGH |
| Uncommitted count | 2 hr | Git Status | HIGH |
| Orchestrator state | 2 hr | Control | HIGH |

### 8.2 Recommended Quick Win Bundle

**Bundle 1: Constraint Visibility (5 hours)**
- Sequential chain icon
- Conflict badge
- Blocker display extension
- Critical path highlight

**Bundle 2: Git Visibility (5 hours)**
- Branch badge in header
- Uncommitted count in footer
- Last commit display
- Commits ahead indicator

**Bundle 3: Orchestrator Visibility (6 hours)**
- Orchestrator state badge
- Retry badge on tasks
- Iteration count
- Stuck countdown inline

---

## 9. Recommendations

### 9.1 Implementation Order

```
Week 1-2:    Quick Win Bundle 1 (Constraints)
             Quick Win Bundle 2 (Git)

Week 2-3:    Task Constraint Panel (MVP)
             Batch Execution Panel (MVP)

Week 3-4:    Git Status Panel (MVP)
             Quick Win Bundle 3 (Orchestrator)

Week 5-7:    Orchestrator Control Panel (with IPC)
             Parallel Dashboard (integrating above)

Week 8+:     Event Stream (with EventBus)
             Multi-Plan View (after worktree support)
```

### 9.2 Resource Allocation

| Period | Primary Focus | Secondary Focus | Hours/Week |
|--------|---------------|-----------------|------------|
| W1-2 | Quick Wins | Research IPC | 15-20 |
| W2-3 | Constraint + Batch | Quick Wins | 25-30 |
| W3-4 | Git Status | Panel polish | 20-25 |
| W5-7 | Orchestrator Control | Parallel Dashboard | 35-40 |
| W8+ | Event Stream | Multi-Plan | 25-30 |

---

## 10. Success Metrics

### 10.1 Tier 1 Success

- [ ] Users can answer "why can't these tasks run together?" from TUI
- [ ] Current batch composition visible at a glance
- [ ] Git status visible without leaving TUI
- [ ] Sequential chains clearly marked

### 10.2 Tier 2 Success

- [ ] Pause/resume orchestrator from TUI
- [ ] Batch size adjustable at runtime
- [ ] Parallel execution status consolidated in one view
- [ ] Failed task intervention available

### 10.3 Tier 3 Success

- [ ] Real-time event stream for debugging
- [ ] Switch between plans without restart
- [ ] Cross-plan progress comparison

---

**End of Priority Analysis**
