# Agent D2 Findings: Standards & Templates

## Summary

Analysis of `docs/standards/` and `docs/plan-templates/` reveals **3 critical issues**: artifact naming inconsistency, broken documentation references, and conflicting severity classification systems. Additionally, 2 out of 3 related standard documents are referenced but do not exist, and a different severity classification system is used in templates that conflicts with the standards documentation.

---

## DRY Violations

### Duplicate Severity Classification Systems
- **Location:** `docs/standards/implementation-plan-standards.md:442-476`, `docs/plan-templates/TEMPLATE.md:80-84`
- **Description:** Two different severity classification systems are defined in parallel:
  1. Standards document defines: `critical`, `high`, `medium`, `low`, `info` (lines 442-476)
  2. TEMPLATE.md defines: `BREAKING`, `BUG`, `SMELL`, `NITPICK` (lines 80-84)
  3. Analysis template uses: `BREAKING > BUG > SMELL > NITPICK` (analysis.md:19)
- **Impact:** Creating confusion about which system to use when categorizing findings
- **Recommendation:** Establish a single canonical severity system. Either deprecate one system with ADR or map between them explicitly.

### Duplicated Code Quality Gate Schema
- **Location:** `docs/standards/implementation-plan-standards.md:186-194` and `docs/standards/implementation-plan-standards.md:468-476`
- **Description:** The code quality gate schema appears twice (identical content):
  ```yaml
  gates:
    critical: 0
    high: 5
    medium: 20
    low: unlimited
  ```
- **Recommendation:** Reference the schema once, define it in a reusable section, and link to it from both locations.

---

## Bugs & Issues

### Broken Documentation References (Missing Files)
- **Location:** `docs/standards/artifact-type-registry.md:220-222`
- **Severity:** High
- **Description:** Three referenced standard documents do not exist:
  1. `./naming-conventions.md` - Referenced on line 220 but file does not exist
  2. `./artifact-schema-standards.md` - Referenced on line 221 but file does not exist
  3. `./yaml-frontmatter-standards.md` - Referenced on line 222 but file does not exist
- **Actual files found:** Only 3 standards files exist:
  - `implementation-plan-standards.md`
  - `artifact-type-registry.md`
  - `subcommand-naming-reference.md`
- **Recommendation:** Either create the missing standard documents or remove the broken references and consolidate content into existing standards files.

### ADR References Point to Non-Existent Directory
- **Location:** `docs/standards/implementation-plan-standards.md:656-665`
- **Severity:** Medium
- **Description:** The ADR template references a `docs/decisions/` directory that does not exist. Examples given:
  ```
  docs/decisions/ADR-001-use-json-for-artifacts.md
  docs/decisions/ADR-002-colon-notation-for-subcommands.md
  docs/decisions/ADR-003-severity-level-definitions.md
  ```
- **Verified:** Directory `docs/decisions` was not found
- **Recommendation:** Create the decisions directory or update the ADR standard with the correct path. If decisions haven't been created yet, remove example ADR references or mark them as "to be created".

---

## Inconsistencies

### Conflicting Artifact Type Naming for Requirements
- **Files:** `docs/standards/artifact-type-registry.md:42`, `docs/standards/implementation-plan-standards.md:92,382`
- **Description:** Artifact type registry inconsistency for requirements:
  - **In artifact-type-registry.md (line 42):** `requirements` (kebab-case but single word)
  - **In implementation-plan-standards.md (lines 92, 382):** `requirements-spec` (hyphenated)
  - **JSON Example in registry (line 171):** Uses `requirements`
  - **JSON Example in standards (line 382):** Uses `requirements-spec`
- **Impact:** Developers will not know which type to use: `requirements` or `requirements-spec`
- **Recommendation:** Choose one canonical form and update all references. The registry should be the source of truth.

### VERIFY Section Format Inconsistency
- **Files:** `docs/standards/implementation-plan-standards.md:310-342`, `docs/plan-templates/validation.md:20-38`
- **Description:** Standards document specifies format `**VERIFY Phase N:**` (bold text) but validation template uses `- [ ] **VERIFY N**:` (within checkbox):
  - **Standard expects:** `**VERIFY Phase N:**` (line 311 in standards)
  - **validation.md uses:** `- [ ] **VERIFY 1**:` (line 20 - within task checkbox)
  - **analysis.md uses:** `- [ ] **VERIFY N**:` (line 15 - within task checkbox)
  - **test-creation.md uses:** `- [ ] **VERIFY N**:` (line 16 - within task checkbox)
- **Impact:** Template implementations don't follow standard format specification for VERIFY sections
- **Recommendation:** Update templates to match standard format: place `**VERIFY Phase N:**` as a separate heading outside of checkboxes, or update standard to allow both formats.

### Missing Template Output Metadata
- **Files:** `docs/plan-templates/validation.md`, `docs/plan-templates/analysis.md`, `docs/plan-templates/test-creation.md`, `docs/plan-templates/documentation.md`
- **Description:** Most plan templates define output locations with placeholder `{{plan_filename}}`:
  - validation.md line 7: `'docs/plan-outputs/{{plan_filename}}/'`
  - analysis.md line 7: `'docs/plan-outputs/{{plan_filename}}/'`
  - But create-plan.md (line 55) uses: `docs/plans/{{plan_filename}}.md`
- **Inconsistency:** Confusion about output directory: `docs/plans/` vs `docs/plan-outputs/`
- **Recommendation:** Standardize on one output location pattern or clarify which plans go where.

---

## Unused/Orphaned

### Unused Plan Template Files
- **Location:** `docs/plan-templates/` directory
- **Description:** Several template files appear to be inactive or duplicated:
  1. `TEMPLATE.md` - Generic template (content differs from CANONICAL-COMMAND-TEMPLATE.md)
  2. `CANONICAL-COMMAND-TEMPLATE.md` - Newer canonical version with extensive variable documentation
  3. `create-plan.md` - Specific meta-template for creating plans
  - Count: 45 total templates in directory, but only 5 core templates documented in TEMPLATE.md:98-104
- **Finding:** The directory contains 38 implement-*.md templates but only 1 "Canonical" template is marked as such
- **Recommendation:** Clarify template hierarchy. Mark CANONICAL-COMMAND-TEMPLATE.md as the primary template and deprecate TEMPLATE.md, or document the purpose of each template type.

### Undocumented Plan Template Status
- **Location:** `docs/plan-templates/` directory
- **Description:** Templates directory contains 45 files but:
  - Only 5 templates are documented in TEMPLATE.md (lines 98-104)
  - The other 40 templates (mostly implement-*.md) have no entry in the template registry
  - No master index of all 45 available templates
- **Impact:** Users won't know all available templates; impossible to audit which templates are actively used
- **Recommendation:** Create a comprehensive template catalog/inventory or generate it automatically from filenames.

### Documented Severity System Not Used in Standards Examples
- **Location:** `docs/standards/implementation-plan-standards.md:340-342` (Bad examples section)
- **Description:** Standards document shows bad VERIFY examples but one uses the conflicting severity system:
  - Example: `**VERIFY:** Works correctly  ❌ (too vague)`
  - Example: `**VERIFY 1:** Command runs   ❌ (not measurable)`
  - These don't reference the critical/high/medium/low system defined elsewhere
- **Recommendation:** Update examples to show severity-based verification criteria when appropriate.

---

## Recommendations Summary

**Immediate Actions (High Priority):**
1. Resolve artifact naming conflict: Choose `requirements` OR `requirements-spec` as canonical form
2. Create missing standard documents or remove broken references (naming-conventions, artifact-schema-standards, yaml-frontmatter-standards)
3. Consolidate or map the two severity classification systems (critical/high/medium/low vs BREAKING/BUG/SMELL/NITPICK)
4. Create the `docs/decisions/` directory or update ADR standard with correct path

**Short Term (Medium Priority):**
1. Standardize VERIFY section format across all templates to match standard specification
2. Clarify output location convention (docs/plans/ vs docs/plan-outputs/)
3. Create template inventory documenting all 45 templates and their status
4. Mark templates as either "canonical", "active", or "deprecated"

**Long Term (Low Priority):**
1. Automate cross-reference validation to prevent future broken links
2. Generate template documentation from actual template files
3. Create a standards compliance checker to catch inconsistencies early
