# 2.3 Glow Markdown Renderer Analysis

## Overview

**Tool:** Glow
**Version:** 2.1.1 (d37e988)
**Binary Path:** /usr/bin/glow
**Purpose:** Terminal-based markdown renderer with syntax highlighting and styling
**Tagline:** "Render markdown on the CLI, with pizzazz!"

Glow is a command-line markdown reader developed by Charmbracelet that renders markdown files with beautiful formatting, syntax highlighting, and custom styles. It can operate in two modes: direct output mode (renders to stdout) and TUI mode (interactive file browser with preview).

**Underlying Engine:** Built on [Glamour](https://github.com/charmbracelet/glamour), a stylesheet-based markdown rendering library that provides the actual rendering capabilities.

## Current Configuration

**Config File:** `/home/benjamin/.config/glow/glow.yml`

```yaml
# style name or JSON path (default "auto")
style: "auto"
# mouse support (TUI-mode only)
mouse: false
# use pager to display markdown
pager: false
# word-wrap at width
width: 80
# show all files, including hidden and ignored.
all: false
```

**Environment Variables:** None currently set
- `GLAMOUR_STYLE` - Can be set to specify default style
- No custom environment configuration active

**Key Settings:**
- Style detection: Auto (detects terminal background, chooses dark/light)
- Word wrap: 80 characters
- Mouse support: Disabled
- Pager: Disabled (direct output to terminal)
- Hidden files: Not shown in TUI mode

## Rendering Options

### Styles

**Built-in Styles:**
- `auto` - Automatically detects terminal background (default)
- `dark` - Optimized for dark terminals
- `light` - Optimized for light terminals
- `pink` - Pink theme
- `notty` - Plain text output without ANSI codes
- `ascii` - ASCII-only rendering

**Custom Styles:**
- Supports JSON stylesheet format via Glamour
- Can specify path to custom style JSON file
- Style gallery available at: https://github.com/charmbracelet/glamour/tree/master/styles/gallery
- Set via `--style /path/to/style.json` or `GLAMOUR_STYLE` environment variable

### Width Control

```bash
glow file.md --width 100    # Wrap at 100 characters
glow file.md --width 0      # Disable word wrapping
glow file.md -w 60          # Short flag
```

**Default:** 80 characters (configurable in glow.yml)

### Display Modes

**1. Direct Output Mode (default)**
```bash
glow file.md                # Render to stdout
glow file.md | less         # Pipe to pager manually
echo "# Title" | glow -     # Read from stdin
```

**2. Pager Mode**
```bash
glow file.md --pager        # Use built-in pager
glow file.md -p             # Short flag
```
- Uses system pager (less)
- Provides scrolling for long documents

**3. TUI Mode**
```bash
glow --tui                  # Interactive file browser
glow --tui /path/to/dir     # Browse specific directory
glow -t                     # Short flag
```
- Interactive file browser with markdown preview
- Keyboard navigation
- File selection and viewing

### TUI-Specific Options

```bash
glow --tui --all            # Show hidden/system files
glow --tui --line-numbers   # Show line numbers in preview
glow --tui --mouse          # Enable mouse support
```

### Output Formatting

**Preserve Newlines:**
```bash
glow file.md --preserve-new-lines   # Don't collapse newlines
glow file.md -n                     # Short flag
```

## Available Features

### 1. Local File Rendering

**Single Files:**
```bash
glow README.md
glow /path/to/document.md
glow docs/*.md              # Glob patterns
```

**Directories:**
```bash
glow /path/to/docs/         # Auto-finds markdown files
glow --tui /path/to/docs/   # Browse directory in TUI
```

### 2. Stdin Support

```bash
echo "# Hello" | glow -
cat file.md | glow -
generate-docs | glow -
```

**Use Case:** Perfect for piping dynamically generated markdown

### 3. GitHub Integration

**Fetch Remote Files:**
```bash
glow github.com/user/repo                    # Fetch repo README
glow github.com/user/repo/blob/main/doc.md   # Specific file
glow https://raw.githubusercontent.com/...   # Direct URL
```

**Fetch via HTTPS:**
```bash
glow https://example.com/document.md
```

### 4. Markdown Features Supported

**Text Formatting:**
- Headers (H1-H6)
- Bold, italic, strikethrough
- Inline code
- Code blocks with syntax highlighting
- Blockquotes
- Lists (ordered, unordered, nested)

**Advanced Elements:**
- Tables (formatted with borders)
- Links (displayed with URLs)
- Images (shows path, not rendered)
- Horizontal rules
- Task lists

**Code Highlighting:**
- Syntax highlighting for code blocks
- Language detection from fence markers
- Tested: Python, Bash, JavaScript, etc.

### 5. Integration with Shell

**Current Integration (via yazi):**
- yazi uses glow for markdown preview
- Configured in yazi's `yazi.toml`:
  ```toml
  prepend_previewers = [
    { name = "*.md", run = "glow" }
  ]
  ```

**Shell Functions/Aliases:**
```bash
# Could add to .bashrc
alias mdview='glow -p'
alias mdcat='glow -s notty'
mdhelp() { glow "$1" | less -R; }
```

### 6. Commands and Subcommands

**Main Commands:**
```bash
glow [file]           # Render markdown
glow config           # Edit config file
glow completion       # Generate shell completions
glow help             # Show help
```

**Completion Support:**
- Bash, Zsh, Fish, PowerShell
- Generate with: `glow completion bash > /etc/bash_completion.d/glow`

## Integration Opportunities

### HIGH Priority

**1. Plan/Documentation Viewing System**
- **Use Case:** View plan files, findings, and documentation with proper formatting
- **Implementation:**
  ```bash
  # Wrapper function for viewing plans
  plan-view() {
    local plan_file="$1"
    glow "$plan_file" --width 100 --pager
  }

  # Integration with plan commands
  # In plan:status output: "View with: glow <plan-file>"
  ```
- **Benefits:**
  - Better readability than raw markdown
  - Consistent viewing experience
  - Works with existing plan structure

**2. CLI Output Formatting**
- **Use Case:** Format help text, status reports, and command outputs
- **Implementation:**
  ```bash
  # In JavaScript/Node scripts
  const { execSync } = require('child_process');
  const markdown = generateStatusMarkdown();
  execSync('glow -', { input: markdown, stdio: 'inherit' });
  ```
- **Benefits:**
  - Professional-looking CLI output
  - Better structured information display
  - Easier to read complex status reports

**3. Documentation Generation Pipeline**
- **Use Case:** Render generated documentation for immediate review
- **Implementation:**
  ```bash
  # After Claude generates a findings document
  node scripts/analyze.js > output.md
  glow output.md --pager
  ```
- **Benefits:**
  - Immediate visual feedback
  - Catch formatting issues early
  - Better review experience

**4. Interactive Help System**
- **Use Case:** Provide formatted help documentation for commands
- **Implementation:**
  ```bash
  # Help command that uses glow
  skill-help() {
    local skill_name="$1"
    local help_file=".claude/skills/${skill_name}/README.md"
    if [[ -f "$help_file" ]]; then
      glow "$help_file" --width 100
    else
      echo "No help available for $skill_name"
    fi
  }
  ```
- **Benefits:**
  - Consistent help format
  - Rich documentation support
  - Better than plain text help

### MEDIUM Priority

**5. Git Integration for PR/Issue Viewing**
- **Use Case:** View PR descriptions and issue bodies with formatting
- **Implementation:**
  ```bash
  # View PR description
  gh pr view 123 --json body -q .body | glow -

  # View issue
  gh issue view 456 --json body -q .body | glow -
  ```
- **Benefits:**
  - Better readability than plain gh output
  - Preserve markdown formatting
  - Easier code review

**6. Diff/Change Visualization**
- **Use Case:** Format commit messages and change summaries
- **Implementation:**
  ```bash
  # Generate and view change summary
  git log --format="# %s%n%n%b" -1 | glow -
  ```
- **Benefits:**
  - Better commit message review
  - Formatted changelogs
  - Professional output

**7. TUI Mode for Documentation Browser**
- **Use Case:** Interactive documentation browser for the project
- **Implementation:**
  ```bash
  # Browse all project documentation
  glow --tui docs/

  # Browse plan findings
  glow --tui docs/plan-outputs/
  ```
- **Benefits:**
  - Quick access to all docs
  - File discovery
  - Preview without opening editor

### LOW Priority

**8. Custom Styles for Branded Output**
- **Use Case:** Create custom styles matching project branding
- **Implementation:**
  - Create custom Glamour JSON stylesheet
  - Apply with `--style /path/to/custom.json`
- **Benefits:**
  - Consistent visual identity
  - Customized for specific use cases
  - Professional appearance

**9. Export/Share Formatted Output**
- **Use Case:** Generate formatted text for sharing
- **Implementation:**
  ```bash
  # Plain text export (no colors)
  glow file.md --style notty > output.txt

  # Styled output (with ANSI codes)
  glow file.md > output.ansi
  ```
- **Benefits:**
  - Shareable formatted docs
  - Terminal recording compatibility
  - Documentation exports

**10. Integration with micro Editor**
- **Use Case:** Preview markdown while editing
- **Implementation:**
  - Could create micro plugin to preview current file
  - Or keybinding to open glow in split
- **Benefits:**
  - Live preview while editing
  - Faster iteration
  - Better writing experience
- **Challenge:** Requires plugin development

## Recommendations

### Immediate Actions (HIGH Priority)

1. **Create Plan Viewing Wrapper**
   - Priority: HIGH
   - Effort: Low (1 hour)
   - Add `plan-view` function to view plans with glow
   - Update plan:status to suggest using glow for viewing
   - Add to shell configuration

2. **Integrate with CLI Scripts**
   - Priority: HIGH
   - Effort: Medium (4-6 hours)
   - Modify status-cli.js to output markdown
   - Pipe through glow for formatted display
   - Update all plan:* commands to use formatted output

3. **Update yazi Configuration**
   - Priority: HIGH
   - Effort: Low (30 min)
   - Already working via glow.yazi plugin
   - Verify optimal settings (width, style)
   - Document in integration guide

4. **Create Documentation Viewing Shortcuts**
   - Priority: HIGH
   - Effort: Low (1 hour)
   - Alias for viewing findings: `view-findings`
   - Function to browse plan outputs: `browse-plans`
   - Quick access to README files

### Short-term Enhancements (MEDIUM Priority)

5. **GitHub CLI Integration**
   - Priority: MEDIUM
   - Effort: Low (2 hours)
   - Create wrapper functions for gh pr/issue viewing
   - Add to shell utilities
   - Document workflow

6. **Help System**
   - Priority: MEDIUM
   - Effort: Medium (4 hours)
   - Create markdown help files for all commands
   - Add help command that uses glow
   - Consistent documentation format

7. **TUI Documentation Browser**
   - Priority: MEDIUM
   - Effort: Low (1 hour)
   - Add `docs` command to open glow TUI in docs/
   - Configure for optimal browsing
   - Add to workflow documentation

### Future Considerations (LOW Priority)

8. **Custom Stylesheet**
   - Priority: LOW
   - Effort: Medium (3-4 hours)
   - Create custom Glamour style
   - Match project branding
   - Apply to all glow usage

9. **Editor Integration**
   - Priority: LOW
   - Effort: High (8-12 hours)
   - Develop micro plugin for live preview
   - Or integration with external preview window
   - Requires significant development

10. **Automated Documentation Pipeline**
    - Priority: LOW
    - Effort: Medium (4-6 hours)
    - Auto-render generated docs
    - Integration with CI/CD
    - Formatted exports

### Configuration Recommendations

**Suggested glow.yml updates:**
```yaml
# Optimized for dev workflow
style: "auto"           # Keep auto-detection
mouse: true             # Enable for TUI mode
pager: false            # Manual control preferred
width: 100              # Wider for modern terminals
all: false              # Hide hidden files by default
```

**Environment Variables to Set:**
```bash
# In .bashrc or .profile
export GLAMOUR_STYLE="auto"   # Can override per-session
```

### Integration Points with Existing Tools

**With yazi:**
- Already integrated via glow.yazi plugin
- Working well for markdown preview
- No changes needed

**With micro:**
- No direct integration currently
- Could add preview command
- Low priority (manual workflow works)

**With git/gh:**
- High potential for enhancement
- View PR/issue bodies formatted
- Better commit message review

**With plan scripts:**
- Highest ROI opportunity
- All plan outputs are markdown
- Natural fit for glow rendering

**With tmux:**
- Could use for status bar documentation
- Pop-up documentation windows
- Low priority

## Summary

Glow is a powerful, well-integrated tool that is already working well in the current workflow via yazi. The biggest opportunities lie in:

1. **Better CLI output** - Using glow to format all plan:* command output
2. **Documentation viewing** - Creating shortcuts and wrappers for viewing generated docs
3. **GitHub integration** - Formatting PR/issue views from gh CLI

The tool is production-ready, well-configured, and requires minimal additional setup for high-value integrations. Focus should be on creating wrapper functions and updating existing scripts to leverage glow's formatting capabilities.

---

**Analysis Date:** 2024-12-24
**Analyzer:** Claude (Sonnet 4.5)
**Next Steps:** Implement HIGH priority recommendations in phase 2
