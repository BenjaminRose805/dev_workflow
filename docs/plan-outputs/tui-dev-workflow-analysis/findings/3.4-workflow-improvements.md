# 3.4 Proposed Workflow Improvements

This document proposes concrete workflow improvements based on the synthesis of Phase 1-2 findings, focusing on high-impact changes that streamline the development experience.

---

## Current Workflow Assessment

### Pain Points Identified

1. **Context Switching Overhead**
   - Switching between yazi, micro, and git CLI breaks flow
   - No unified way to perform git operations from any tool
   - tmux doesn't integrate with anything

2. **Navigation Friction**
   - No smart directory jumping (typing full paths)
   - fzf available but not shell-integrated
   - No bookmarks in yazi

3. **Git Workflow Inefficiency**
   - Raw git CLI for all operations
   - No visual diff viewer
   - No staging UI
   - diffgutter disabled in editor

4. **Missing Visual Feedback**
   - No git status in file listings (fetcher misconfigured)
   - No git branch in prompt
   - Default tmux with no status info

5. **Limited Code Intelligence**
   - LSP only for Python
   - No spell checking
   - No snippets

---

## Proposed Workflow Improvements

### Improvement 1: Unified Git Experience

**Goal:** Access git operations from anywhere with consistent UX

**Current State:**
```
Terminal → git status/diff/add/commit (raw CLI)
yazi → Can see git status (partial), no actions
micro → No git awareness
```

**Proposed State:**
```
Terminal → git CLI + delta (beautiful diffs) + fzf-git (fuzzy)
yazi → Full git status + Ctrl-G opens lazygit
micro → diffgutter shows changes + gitStatus in statusbar
Anywhere → lazygit for complex operations
```

**Implementation Steps:**
1. Install lazygit and delta
2. Configure delta as git pager in .gitconfig
3. Enable micro diffgutter and install gitStatus
4. Fix yazi git fetcher and add lazygit.yazi
5. Add fzf-git.sh for terminal fuzzy git

**Expected Outcome:**
- 50% reduction in git command typing
- Visual feedback at every step
- Consistent Ctrl-G keybinding for git UI

---

### Improvement 2: Smart Navigation System

**Goal:** Navigate to any directory in <3 keystrokes

**Current State:**
```
cd /home/benjamin/projects/dev_workflow/docs  # Full path typing
cd ..  # Tedious directory climbing
```

**Proposed State:**
```
z dev docs         # Jump to matching directory
zi                 # Interactive selection with fzf
Ctrl-T             # Fuzzy file finding from shell
Alt-C              # Fuzzy cd from shell
```

**Implementation Steps:**
1. Install zoxide
2. Add `eval "$(zoxide init bash)"` to .bashrc
3. Source fzf shell integration
4. Configure yazi with zoxide keybinding

**Expected Outcome:**
- Directory navigation ~5x faster
- Learns from usage patterns
- Works in shell and yazi

---

### Improvement 3: Integrated Editing Environment

**Goal:** Full IDE-like experience in terminal

**Current State:**
```
micro → Python LSP only, no git, default theme
- Missing: bash/JSON/markdown intelligence
- Missing: Visual git integration
- Missing: Modern theme
```

**Proposed State:**
```
micro → Multi-language LSP + git integration + snippets
- Python, Bash, JSON, Markdown LSP
- diffgutter + gitStatus
- Trailing whitespace detection
- Modern colorscheme
```

**Implementation Steps:**
1. Update settings.json with expanded LSP config
2. Enable diffgutter, hltrailingws
3. Install gitStatus, detectindent, snippets
4. Install monokai-dark theme

**Configuration:**
```json
{
    "lsp.server": "python=pylsp,sh=bash-language-server,json=deno lsp,markdown=deno lsp",
    "lsp.formatOnSave": true,
    "diffgutter": true,
    "hltrailingws": true,
    "colorscheme": "monokai-dark",
    "rmtrailingws": true
}
```

**Expected Outcome:**
- Code intelligence for all common file types
- Visual git feedback while editing
- Catch whitespace issues before commit

---

### Improvement 4: Persistent Development Sessions

**Goal:** Never lose tmux session state

**Current State:**
```
tmux → Default config, no persistence
- Prefix: Ctrl-b (awkward)
- No session save/restore
- No status information
- Killed on reboot = lost
```

**Proposed State:**
```
tmux → Configured with TPM, persistent sessions
- Prefix: Ctrl-a (more ergonomic)
- Auto-save every 15 minutes
- Auto-restore on start
- Git branch + directory in status
```

**Implementation Steps:**
1. Create ~/.tmux.conf with basic settings
2. Install TPM
3. Add tmux-sensible, tmux-resurrect, tmux-continuum
4. Configure status line

**Configuration:**
```
# ~/.tmux.conf
set -g prefix C-a
unbind C-b
bind C-a send-prefix

set -g mouse on
set -g history-limit 50000
set -g base-index 1

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @continuum-restore 'on'

run '~/.tmux/plugins/tpm/tpm'
```

**Expected Outcome:**
- Complete session persistence across reboots
- More comfortable keybindings
- Visual status information

---

### Improvement 5: Enhanced File Management

**Goal:** yazi becomes the hub for file operations

**Current State:**
```
yazi → Basic file manager
- Git status partial
- No quick bookmarks
- No archive handling
- No git TUI access
```

**Proposed State:**
```
yazi → Integrated development hub
- Full git status in file list
- Ctrl-G for lazygit
- z for zoxide jump
- Quick bookmarks (yamb)
- Archive preview/extract (ouch)
```

**Implementation Steps:**
1. Fix git fetcher configuration
2. Install lazygit.yazi plugin
3. Install yamb.yazi for bookmarks
4. Install ouch.yazi for archives
5. Create keymap.toml with shortcuts

**Keymap Configuration:**
```toml
[[manager.prepend_keymap]]
on = ["<C-g>"]
run = "plugin lazygit"
desc = "Open lazygit"

[[manager.prepend_keymap]]
on = ["z"]
run = "plugin zoxide"
desc = "Zoxide jump"

[[manager.prepend_keymap]]
on = ["<C-e>"]
run = "seek 5"
desc = "Scroll preview down"

[[manager.prepend_keymap]]
on = ["<C-y>"]
run = "seek -5"
desc = "Scroll preview up"
```

**Expected Outcome:**
- One-stop file and git management
- Quick navigation via bookmarks and zoxide
- Seamless archive handling

---

### Improvement 6: Beautiful Terminal Output

**Goal:** Syntax highlighting everywhere

**Current State:**
```
cat file.py       → Plain text
git diff          → Basic colors
ls                → Basic output
```

**Proposed State:**
```
bat file.py       → Syntax highlighted + line numbers
git diff          → delta (side-by-side, syntax highlighted)
eza               → Modern ls with git status + icons
```

**Implementation Steps:**
1. Install bat, delta, eza
2. Configure git to use delta
3. Add aliases: `alias cat='bat'`, `alias ls='eza'`

**Aliases:**
```bash
alias cat='bat --paging=never'
alias ls='eza --icons --group-directories-first'
alias ll='eza -la --icons --group-directories-first --git'
alias tree='eza --tree --icons'
```

**Expected Outcome:**
- All terminal output visually enhanced
- Better code review experience
- Easier file exploration

---

## Workflow Comparison

### Before: Editing a Python File

```
1. cd /home/benjamin/projects/myproject/src/utils  # Type full path
2. ls                                               # Find file
3. micro helper.py                                  # Open file
4. (edit code - no git awareness)
5. :quit                                            # Exit
6. git diff helper.py                               # Check changes (basic)
7. git add helper.py                                # Stage
8. git status                                       # Verify
9. git commit -m "message"                          # Commit
```
**Steps:** 9  **Context switches:** 4

### After: Same Task

```
1. z myproject utils                               # Smart jump
2. yazi                                            # See files with git status
3. Enter on helper.py                              # Opens in micro
4. (edit code - see git diff in gutter)
5. Ctrl-G                                          # Open lazygit
6. (stage, commit in visual UI)
```
**Steps:** 6  **Context switches:** 2

**Improvement:** 33% fewer steps, 50% fewer context switches

---

## Daily Workflow: Before vs After

### Morning Startup

**Before:**
```
1. tmux                        # Start tmux
2. cd ~/projects/current       # Navigate
3. git status                  # Check state
4. micro src/main.py           # Start editing
```

**After:**
```
1. tmux                        # Restores previous session automatically
2. (already in project with git status visible)
3. (continue where you left off)
```

### Code Review

**Before:**
```
git diff --stat
git diff src/feature.py        # Basic diff
(scroll through changes)
git add -p                     # Patch add (text mode)
```

**After:**
```
Ctrl-G                         # Open lazygit anywhere
(visual diff with syntax highlighting)
(stage hunks with visual feedback)
```

### Finding Files

**Before:**
```
find . -name "*.py" | grep utils
cd path/to/file
```

**After:**
```
Ctrl-T                         # fzf file finder
(type partial name)
Enter                          # Open/navigate
```

---

## Implementation Priority

### Week 1: Foundation (2-3 hours)
1. **fzf shell integration** - Immediate productivity boost
2. **Install lazygit, bat, delta, zoxide** - Essential tools
3. **Fix yazi git fetcher** - Enable file git status
4. **Enable micro diffgutter** - Git in editor

### Week 2: Enhancement (2-3 hours)
1. **Configure tmux with TPM** - Session persistence
2. **Add fzf-git.sh** - Fuzzy git operations
3. **Expand micro LSP** - Multi-language support
4. **Install yazi plugins** - lazygit, bookmarks

### Week 3: Polish (1-2 hours)
1. **Add shell aliases** - bat, eza, delta
2. **Create yazi keymap** - Custom shortcuts
3. **Install micro plugins** - snippets, themes
4. **Fine-tune tmux status** - Information display

---

## Success Metrics

| Metric | Before | After | Improvement |
|--------|--------|-------|-------------|
| Directory navigation time | 5-10 sec | 1-2 sec | 5x faster |
| Git status check | 2 commands | 0 (visible) | Instant |
| File finding | find + grep | Ctrl-T | 3x faster |
| Git operations | 5+ commands | 2-3 in UI | 50% reduction |
| Session restore | Manual rebuild | Automatic | 100% saved |
| Context switches per task | 4-6 | 2-3 | 50% reduction |

---

## Risk Mitigation

### Learning Curve
- **Risk:** New tools may slow down initially
- **Mitigation:** Focus on muscle memory keybindings (Ctrl-R, Ctrl-T, z)

### Configuration Conflicts
- **Risk:** New settings may break existing workflow
- **Mitigation:** Backup configs before changes, test incrementally

### Tool Availability
- **Risk:** Some tools may not be available on all systems
- **Mitigation:** Document fallbacks, keep core tools minimal

---

**Generated:** 2024-12-24
**Based on:** Phase 1-3 findings synthesis
