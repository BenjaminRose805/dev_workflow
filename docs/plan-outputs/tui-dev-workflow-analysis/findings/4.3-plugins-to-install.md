# 4.3 Plugins to Install

This document provides a definitive list of plugins to install for each TUI tool, with exact installation commands and verification steps.

---

## Summary Table

| Tool | HIGH Priority | MEDIUM Priority | LOW Priority |
|------|---------------|-----------------|--------------|
| **Yazi** | lazygit, git (fix) | yamb, ouch, smart-enter | yatline, full-border |
| **Micro** | gitStatus, detectindent | snippets, aspell | monokai-dark, wc |
| **tmux** | TPM, sensible, resurrect | continuum, yank | prefix-highlight |
| **Shell** | fzf integration, zoxide | fzf-git.sh, starship | - |

---

## Yazi Plugins

### Installation Prerequisites

```bash
# Ensure ya pkg manager is available
ya --version
```

### HIGH Priority Plugins

#### 1. lazygit.yazi
**Purpose:** Open lazygit TUI from within yazi
**Requirement:** lazygit must be installed

```bash
# Install lazygit first
sudo apt install lazygit

# Install plugin
ya pkg add yazi-rs/plugins:lazygit
```

**Keymap (add to keymap.toml):**
```toml
[[manager.prepend_keymap]]
on   = ["<C-g>"]
run  = "plugin lazygit"
desc = "Open lazygit"
```

**Verification:**
```bash
# In yazi, press Ctrl-G
# Should open lazygit TUI
```

---

#### 2. git.yazi (Fix)
**Purpose:** Show git status in file list
**Status:** Already installed, needs configuration fix

**Fix (add to yazi.toml):**
```toml
[[plugin.prepend_fetchers]]
id   = "git"
name = "*"
run  = "git"

[[plugin.prepend_fetchers]]
id   = "git"
name = "*/"
run  = "git"
```

**Verification:**
```bash
# Open yazi in a git repo
# Modified files show 'M', untracked show '?'
```

---

### MEDIUM Priority Plugins

#### 3. yamb.yazi (Bookmarks)
**Purpose:** Persistent bookmark system with fuzzy search

```bash
ya pkg add yazi-rs/plugins:yamb
```

**Keymap:**
```toml
[[manager.prepend_keymap]]
on   = ["m"]
run  = "plugin yamb --args=save"
desc = "Save bookmark"

[[manager.prepend_keymap]]
on   = ["'"]
run  = "plugin yamb --args=jump"
desc = "Jump to bookmark"
```

---

#### 4. ouch.yazi (Archives)
**Purpose:** Preview and extract archives

```bash
# Install ouch binary first
cargo install ouch

# Install plugin
ya pkg add yazi-rs/plugins:ouch
```

**Features:**
- Preview archive contents
- Extract with single key
- Create archives

---

#### 5. smart-enter.yazi
**Purpose:** Smart directory entry and archive handling

```bash
ya pkg add yazi-rs/plugins:smart-enter
```

**Keymap:**
```toml
[[manager.prepend_keymap]]
on   = ["l"]
run  = "plugin smart-enter"
desc = "Smart enter"

[[manager.prepend_keymap]]
on   = ["<Enter>"]
run  = "plugin smart-enter"
desc = "Smart enter"
```

---

### LOW Priority Plugins

#### 6. duckdb.yazi
**Purpose:** Preview CSV, JSON, Parquet files

```bash
# Install duckdb first
# Then plugin
ya pkg add yazi-rs/plugins:duckdb
```

---

#### 7. mediainfo.yazi
**Purpose:** Detailed media metadata

```bash
sudo apt install mediainfo
ya pkg add yazi-rs/plugins:mediainfo
```

---

### Yazi Plugin Installation Script

```bash
#!/bin/bash
# install-yazi-plugins.sh

echo "=== Installing Yazi Plugins ==="

# HIGH priority
ya pkg add yazi-rs/plugins:lazygit
echo "✓ lazygit.yazi installed"

# MEDIUM priority
ya pkg add yazi-rs/plugins:smart-enter
ya pkg add yazi-rs/plugins:yamb
echo "✓ smart-enter, yamb installed"

# Optional: MEDIUM with dependencies
if command -v ouch &> /dev/null; then
    ya pkg add yazi-rs/plugins:ouch
    echo "✓ ouch.yazi installed"
else
    echo "⚠ Skipping ouch.yazi (ouch not installed)"
fi

# List installed
echo ""
echo "Installed plugins:"
ya pkg list

echo ""
echo "=== Done ==="
echo "Remember to create ~/.config/yazi/keymap.toml with keybindings"
```

---

## Micro Plugins

### Installation Command Format

```bash
micro -plugin install PLUGIN_NAME
```

### HIGH Priority Plugins

#### 1. gitStatus
**Purpose:** Git branch and status in status bar

```bash
micro -plugin install gitstatus
```

**Verification:**
- Open a file in a git repo
- Status bar shows branch name

---

#### 2. detectindent
**Purpose:** Automatically detect file indentation

```bash
micro -plugin install detectindent
```

**Verification:**
- Open file with tabs → tabstospaces disabled
- Open file with spaces → tabstospaces enabled

---

### MEDIUM Priority Plugins

#### 3. snippets
**Purpose:** Code snippet expansion

```bash
micro -plugin install snippets
```

---

#### 4. aspell
**Purpose:** Spell checking
**Requirement:** aspell binary

```bash
sudo apt install aspell
micro -plugin install aspell
```

---

#### 5. quickfix
**Purpose:** Navigate compiler/linter errors

```bash
micro -plugin install quickfix
```

---

### LOW Priority Plugins

#### 6. monokai-dark
**Purpose:** Monokai color scheme

```bash
micro -plugin install monokai-dark
```

**Enable in settings.json:**
```json
{
    "colorscheme": "monokai-dark"
}
```

---

#### 7. wc (Word Count)
**Purpose:** Word and line counting

```bash
micro -plugin install wc
```

---

### Micro Plugin Installation Script

```bash
#!/bin/bash
# install-micro-plugins.sh

echo "=== Installing Micro Plugins ==="

# HIGH priority
micro -plugin install gitstatus
micro -plugin install detectindent
echo "✓ HIGH priority plugins installed"

# MEDIUM priority
micro -plugin install snippets
micro -plugin install quickfix
echo "✓ MEDIUM priority plugins installed"

# LOW priority (optional)
micro -plugin install monokai-dark
micro -plugin install wc
echo "✓ LOW priority plugins installed"

# List installed
echo ""
echo "Installed plugins:"
ls ~/.config/micro/plug/

echo ""
echo "=== Done ==="
```

---

## tmux Plugins

### Installation Prerequisites

```bash
# Install TPM first
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
```

### Plugin Declaration (in ~/.tmux.conf)

```bash
# Add to ~/.tmux.conf

# Plugin Manager
set -g @plugin 'tmux-plugins/tpm'

# HIGH Priority
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'

# MEDIUM Priority
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'

# LOW Priority
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

# Initialize TPM (MUST be at very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
```

### Installing Plugins

After adding to .tmux.conf:
1. Start/restart tmux
2. Press `prefix + I` (capital I) to install plugins

Or from command line:
```bash
~/.tmux/plugins/tpm/bin/install_plugins
```

### Plugin Descriptions

| Plugin | Purpose | Priority |
|--------|---------|----------|
| tpm | Plugin manager | REQUIRED |
| tmux-sensible | Better defaults | HIGH |
| tmux-resurrect | Save/restore sessions | HIGH |
| tmux-continuum | Auto-save sessions | MEDIUM |
| tmux-yank | System clipboard | MEDIUM |
| tmux-prefix-highlight | Visual prefix indicator | LOW |

### tmux Plugin Configuration

```bash
# Additional settings for plugins (add to .tmux.conf)

# tmux-resurrect settings
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'

# tmux-continuum settings
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'
```

---

## Shell Extensions (Not Plugins)

### Tools to Install via Package Manager

```bash
# Essential tools
sudo apt install lazygit bat zoxide

# On Ubuntu, bat is 'batcat'
# Create alias: alias bat='batcat'

# Delta via cargo (latest version)
cargo install git-delta

# Optional tools
sudo apt install jq fd-find
cargo install eza
```

### fzf Shell Integration

```bash
# Already installed, just need to source
# Add to ~/.bashrc:
source /usr/share/doc/fzf/examples/key-bindings.bash
source /usr/share/doc/fzf/examples/completion.bash
```

### fzf-git.sh

```bash
# Download
curl -o ~/.fzf-git.sh https://raw.githubusercontent.com/junegunn/fzf-git.sh/main/fzf-git.sh

# Add to ~/.bashrc:
[ -f ~/.fzf-git.sh ] && source ~/.fzf-git.sh
```

### zoxide Integration

```bash
# Add to ~/.bashrc:
eval "$(zoxide init bash)"
```

---

## Complete Installation Script

```bash
#!/bin/bash
# install-all-plugins.sh
# Complete plugin installation for TUI workflow

set -e

echo "=========================================="
echo "TUI Workflow Plugin Installer"
echo "=========================================="

# Check prerequisites
echo ""
echo "Checking prerequisites..."
command -v ya >/dev/null || { echo "ERROR: yazi (ya) not found"; exit 1; }
command -v micro >/dev/null || { echo "ERROR: micro not found"; exit 1; }
command -v tmux >/dev/null || { echo "ERROR: tmux not found"; exit 1; }
echo "✓ All prerequisites found"

# Install system packages
echo ""
echo "Installing system packages..."
if command -v apt >/dev/null; then
    sudo apt install -y lazygit bat zoxide jq
    echo "✓ System packages installed"
fi

# Install cargo packages
echo ""
echo "Installing cargo packages..."
if command -v cargo >/dev/null; then
    cargo install git-delta eza 2>/dev/null || echo "⚠ Some cargo packages may already be installed"
    echo "✓ Cargo packages installed"
fi

# Install yazi plugins
echo ""
echo "Installing yazi plugins..."
ya pkg add yazi-rs/plugins:lazygit
ya pkg add yazi-rs/plugins:smart-enter
ya pkg add yazi-rs/plugins:yamb
echo "✓ Yazi plugins installed"

# Install micro plugins
echo ""
echo "Installing micro plugins..."
micro -plugin install gitstatus
micro -plugin install detectindent
micro -plugin install snippets
micro -plugin install monokai-dark
echo "✓ Micro plugins installed"

# Install TPM
echo ""
echo "Installing tmux plugin manager..."
if [ ! -d ~/.tmux/plugins/tpm ]; then
    git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
    echo "✓ TPM installed"
else
    echo "✓ TPM already installed"
fi

# Download fzf-git.sh
echo ""
echo "Downloading fzf-git.sh..."
if [ ! -f ~/.fzf-git.sh ]; then
    curl -sS -o ~/.fzf-git.sh https://raw.githubusercontent.com/junegunn/fzf-git.sh/main/fzf-git.sh
    echo "✓ fzf-git.sh downloaded"
else
    echo "✓ fzf-git.sh already exists"
fi

echo ""
echo "=========================================="
echo "Installation Complete!"
echo "=========================================="
echo ""
echo "Next steps:"
echo "1. Update ~/.bashrc with integrations"
echo "2. Create ~/.config/yazi/keymap.toml"
echo "3. Update ~/.config/micro/settings.json"
echo "4. Create ~/.tmux.conf and run: prefix + I"
echo ""
echo "See 4.2-configuration-changes.md for details"
```

---

## Verification Checklist

### Yazi Plugins
```bash
ya pkg list
# Should show: lazygit, smart-enter, yamb
```

### Micro Plugins
```bash
ls ~/.config/micro/plug/
# Should show: gitstatus, detectindent, snippets, monokai-dark
```

### tmux Plugins
```bash
ls ~/.tmux/plugins/
# Should show: tpm, tmux-sensible, tmux-resurrect, tmux-continuum
```

### Shell Extensions
```bash
# Verify commands
command -v lazygit && echo "✓ lazygit"
command -v bat || command -v batcat && echo "✓ bat"
command -v delta && echo "✓ delta"
command -v zoxide && echo "✓ zoxide"
[ -f ~/.fzf-git.sh ] && echo "✓ fzf-git.sh"
```

---

## Plugin Count Summary

| Category | Plugins | Status |
|----------|---------|--------|
| Yazi plugins | 6 | To install |
| Micro plugins | 7 | To install |
| tmux plugins | 6 | To install |
| Shell tools | 5 | To install |
| **Total** | **24** | |

---

**Generated:** 2024-12-24
**Based on:** 3.3 Plugins/Extensions Research
