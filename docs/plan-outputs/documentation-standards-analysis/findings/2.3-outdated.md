# Task 2.3: Outdated Documentation Analysis

## Executive Summary

Analysis reveals 8 critical outdated references in documentation, primarily related to deleted files (plan-orchestrator.js, plan-runner.sh, status-manager.js, plan-pointer.js, current-plan-output.txt). These files were consolidated during the orchestrator-simplification plan but documentation was not fully updated. Most issues are in core architecture/orchestrator docs that developers reference frequently.

## References to Non-Existent Patterns

| Document | Outdated Reference | Current Reality | Recommendation |
|----------|-------------------|-----------------|----------------|
| docs/ORCHESTRATOR.md | References `plan-runner.sh` in architecture diagram (line 36) | File deleted - consolidated into status-cli.js | UPDATE - remove from diagram |
| docs/ORCHESTRATOR.md | Architecture describes 3-layer system with plan-orchestrator.js | plan-orchestrator.js deleted - merged into status-cli.js | UPDATE - simplify architecture to 2-layer |
| docs/ARCHITECTURE.md | References `plan-runner.sh` as shell wrapper | File doesn't exist | UPDATE - remove reference |
| docs/architecture/orchestrator-system.md | Pointer files section (line 122-124) references `current-plan-output.txt` | File doesn't exist - path now derived from plan name | UPDATE - remove outdated pointer file |
| .claude/commands/plan/migrate.md | Line 233: "cat .claude/current-plan-output.txt" | File doesn't exist | UPDATE - remove outdated verification step |
| .claude/commands/plan/migrate.md | Line 237: references getOutputDir from plan-output-utils.js | Function is in plan-status.js now | UPDATE - correct import path |

## Contradictions with Implementation

| Document | Documented Behavior | Actual Behavior | Recommendation |
|----------|---------------------|-----------------|----------------|
| docs/ORCHESTRATOR.md | Python TUI calls plan-runner.sh which calls plan-orchestrator.js | Python TUI calls status-cli.js directly | UPDATE - update data flow diagram |
| docs/architecture/orchestrator-system.md | Two pointer files: current-plan.txt and current-plan-output.txt | Only current-plan.txt exists; output derived from plan name | UPDATE - correct pointer file documentation |
| docs/claude-commands/ARCHITECTURE.md | Lists status-manager.js in library layer (line 48) | status-manager.js deleted - merged into plan-status.js | UPDATE - remove from library list |
| docs/claude-commands/ARCHITECTURE.md | Lists plan-output-utils.js in library layer | Still exists but functions moved to plan-status.js | UPDATE - clarify plan-status.js is unified API |

## Never-Implemented Features

| Document | Described Feature | Evidence Not Implemented | Recommendation |
|----------|-------------------|-------------------------|----------------|
| N/A | No never-implemented features found | All documented features exist or were properly archived | N/A |

## Outdated File Paths

| Document | References Path | Path Status | Recommendation |
|----------|-----------------|-------------|----------------|
| docs/ORCHESTRATOR.md | scripts/plan-orchestrator.js | Doesn't exist (deleted Dec 2024) | UPDATE - remove all references |
| docs/ORCHESTRATOR.md | scripts/plan-runner.sh | Doesn't exist (deleted Dec 2024) | UPDATE - remove all references |
| docs/plan-system/MIGRATION-GUIDE.md | References "docs/completed plans/" | Directory exists but inconsistent naming | UPDATE - standardize to "docs/plans/archive/" |
| docs/ARCHITECTURE.md | References "docs/completed plans/" for archived plans | Both exist but docs/plans/archive/ is primary | UPDATE - prefer docs/plans/archive/ |
| docs/VISION.md | Line 128: "archived in docs/plans/archive/" | Correct path | No change needed |

## Action Summary

### Immediate Updates Required

1. **docs/ORCHESTRATOR.md** - Remove plan-runner.sh and plan-orchestrator.js from architecture diagram; update to show Python TUI → status-cli.js direct flow
2. **docs/ARCHITECTURE.md** - Remove plan-orchestrator.js and plan-runner.sh references; update to 2-layer architecture (plan_orchestrator.py → status-cli.js → plan-status.js)
3. **docs/architecture/orchestrator-system.md** - Remove current-plan-output.txt from pointer files section; add note that output directory is derived from plan name
4. **.claude/commands/plan/migrate.md** - Remove current-plan-output.txt verification step; update getOutputDir import to use plan-status.js
5. **docs/claude-commands/ARCHITECTURE.md** - Remove status-manager.js from library list; clarify plan-status.js is the unified API

### Archive Candidates

None - no documentation has purely historical value that should be archived.

### Delete Candidates

None - all outdated documentation should be updated rather than deleted as it serves current architectural documentation needs.

### Low Priority Updates

1. **docs/plan-system/MIGRATION-GUIDE.md** - Standardize references to use "docs/plans/archive/" instead of "docs/completed plans/" for consistency
2. **docs/PLAN-EXECUTION-TRACKER.md** - Update completion dates (last updated 2025-12-24, may need refresh)
3. **Multiple archived plan status.json files** - Contains references to deleted files in task notes, but these are historical records and don't need updates

## Detailed Findings

### Critical: ORCHESTRATOR.md Architecture Diagram

**Location**: /home/benjamin/tools/dev_workflow/docs/ORCHESTRATOR.md:36

**Issue**: Architecture diagram shows:
```
│  plan_orchestrator.py │    │  plan-runner.sh  │
```

**Reality**: plan-runner.sh was deleted during orchestrator-simplification plan. Python orchestrator now calls status-cli.js directly.

**Evidence**:
- `ls scripts/plan-runner.sh` → file not found
- orchestrator-simplification status.json task 1.5 notes: "Deleted scripts/plan-runner.sh"
- plan_orchestrator.py calls `node scripts/status-cli.js` directly

**Fix**: Update diagram to show: `plan_orchestrator.py → status-cli.js → plan-status.js`

### Critical: Missing File References in Architecture Docs

**Deleted Files Still Documented**:
- plan-orchestrator.js (deleted task 3.6)
- plan-runner.sh (deleted task 1.5)
- status-manager.js (deleted task 2.4)
- plan-pointer.js (deleted task 2.5)
- current-plan-output.txt (never created - path is derived)

**Impact**: Developers following architecture docs will reference non-existent files.

### Medium: Library List Outdated

**Location**: docs/claude-commands/ARCHITECTURE.md:48

**Issue**: Lists old library structure before consolidation

**Fix**: Update to show plan-status.js as the unified API that replaced status-manager.js and plan-pointer.js

### Low: Directory Naming Inconsistency

**Issue**: Both "docs/completed plans/" and "docs/plans/archive/" are referenced

**Reality**: Both directories exist:
- `docs/completed plans/` - legacy location with 5 old plans
- `docs/plans/archive/` - current archive location with 60+ plans

**Recommendation**: Standardize documentation to reference "docs/plans/archive/" as the primary archive location.

## Validation

**Files Verified as Existing**:
- ✓ scripts/status-cli.js
- ✓ scripts/lib/plan-status.js
- ✓ scripts/lib/plan-output-utils.js
- ✓ scripts/plan_orchestrator.py
- ✓ scripts/migrate-completed-plan.js
- ✓ scripts/scan-completed-plans.js
- ✓ .claude/current-plan.txt

**Files Verified as NOT Existing**:
- ✗ scripts/plan-orchestrator.js
- ✗ scripts/plan-runner.sh
- ✗ scripts/lib/status-manager.js
- ✗ scripts/lib/plan-pointer.js
- ✗ .claude/current-plan-output.txt

**Current Implementation Confirmed**:
- Plan pointer: Single file `.claude/current-plan.txt` contains active plan path
- Output directory: Derived from plan name via `getOutputDir(planPath)` in plan-status.js
- Status tracking: Unified in plan-status.js (consolidated from 4 separate modules)
- CLI interface: status-cli.js provides all commands (no separate plan-orchestrator.js)
