# 3.1 Plan Standards Analysis

**Status:** completed
**Started:** 2025-12-25
**Summary:** Mapped all documents defining plan standards, identified the authoritative source, documented current standards, and found 15 gaps and 6 conflicts.

---

## Documents Defining Plan Standards

### Implementation Plan Standards (PRIMARY AUTHORITY)
- **Path**: `docs/standards/implementation-plan-standards.md`
- **Purpose**: Authoritative standards document (Version 1.0, Last Updated: 2025-12-23) for all implementation plans in `docs/plans/implement-*.md`
- **Plan requirements defined**:
  - Required sections (Overview, Dependencies, Phase 1+, Success Criteria, Risks)
  - Phase structure and numbering (0, 1, 2, 3...)
  - Task numbering conventions (N.1, N.2, N.M.1 for subtasks)
  - VERIFY section format for each phase
  - Output directory conventions
  - Artifact metadata standards
  - Artifact discovery patterns (three-tier fallback)
  - Input validation standards (three-layer approach)

### Plan Template Format Documentation
- **Path**: `docs/plan-templates/TEMPLATE.md`
- **Purpose**: Documents the meta-template for creating new plans via `/plan:create`
- **Plan requirements defined**:
  - Template variables syntax (`{{variable_name}}`)
  - Standard template structure with phases
  - Checkbox conventions (incomplete/complete)
  - Status indicators
  - Severity levels for analysis plans
  - Template-specific variables for different plan types

### Canonical Command Template
- **Path**: `docs/plan-templates/CANONICAL-COMMAND-TEMPLATE.md`
- **Purpose**: Concrete template for implementation command plans with variable references
- **Plan requirements defined**:
  - Standardized phase structure (1-6: Infrastructure, Implementation, Sub-Commands, Artifacts, Testing, Documentation)
  - Template variable placeholders for customization
  - Success criteria categories (Functional, Quality, Documentation)
  - Risk assessment table format

### Architecture Documentation
- **Path**: `docs/ARCHITECTURE.md`
- **Purpose**: Describes the plan system architecture and components
- **Plan requirements defined**:
  - Directory structure for plan outputs (`docs/plan-outputs/{plan-name}/`)
  - Status tracking format (`status.json` as source of truth)
  - Plan file location and structure
  - Output directory structure (artifacts/, findings/, verification/, status.json)

### Orchestrator Documentation
- **Path**: `docs/ORCHESTRATOR.md`
- **Purpose**: Describes plan execution and status management
- **Plan requirements defined**:
  - Status.json file structure and format
  - Task state tracking (pending/in_progress/completed/failed/skipped)
  - Status file location derivation from plan name
  - Findings storage convention

### Plans Index
- **Path**: `docs/plans/README.md`
- **Purpose**: Index and quick reference for all implementation plans
- **Plan requirements defined**:
  - Plan template structure (Overview, Dependencies, Phases, Success Criteria, Risks)
  - Priority levels (P0, P1, P2)
  - Plan naming conventions (`implement-{command}-command.md`)
  - Validation requirements

### Artifact Schemas
- **Path**: `docs/schemas/README.md`
- **Purpose**: Formal JSON Schema definitions for artifacts
- **Plan requirements defined**:
  - Required artifact metadata fields (artifact_type, version, created_at, created_by, command, status)
  - Naming conventions (kebab-case for files, snake_case for fields)
  - Severity level standards

### Plan Command Documentation
- **Path**: `.claude/commands/plan/*.md`
- **Purpose**: Command-specific implementation for plan management skills
- **Plan requirements defined**:
  - Status tracking integration patterns
  - Task ID argument parsing conventions
  - Output directory conventions
  - Status.json initialization and management

---

## Authoritative Source Analysis

**THE AUTHORITATIVE DOCUMENT IS: `docs/standards/implementation-plan-standards.md`**

**Rationale:**
1. **Explicit Authority Claim**: Opens with "This document defines the authoritative standards for all implementation plans in `docs/plans/implement-*.md`"
2. **Comprehensive Coverage**: Contains 15 major sections covering all aspects of plan standards (naming, structure, quality, artifacts, validation, etc.)
3. **Dated and Versioned**: Version 1.0, Last Updated: 2025-12-23 - providing formal version control
4. **Applies To Clause**: Explicitly states "Applies To: All files in `docs/plans/implement-*.md`"
5. **Cross-Referenced**: Other documents (ARCHITECTURE.md, ORCHESTRATOR.md, schemas/README.md) reference this document as the source of truth
6. **Validation**: Referenced by the plans/README.md validation process which checks "Required sections (Overview, Dependencies, Success Criteria, Risks)"

**Other Documents Play Supporting Roles:**
- TEMPLATE.md: Describes how to use the templating system
- CANONICAL-COMMAND-TEMPLATE.md: Provides concrete example of the standard
- ARCHITECTURE.md & ORCHESTRATOR.md: Explain execution system mechanics that enforce the standards
- Plans command files: Implement the standards programmatically

---

## Current Plan Standards (as documented)

### Required Sections

Every implementation plan MUST include these sections:

1. **# Implementation Plan: [Command Name]**
   - Top-level title with command name

2. **## Overview**
   - **Goal**: One-sentence goal (required)
   - **Priority**: P0 | P1 | P2 (required)
   - **Created**: YYYY-MM-DD format (required)
   - **Output**: `docs/plan-outputs/implement-{command-name}/` (required)

3. **## Dependencies**
   - **Upstream**: Commands/artifacts this plan consumes (required subsection)
   - **Downstream**: Commands/artifacts that consume this plan's outputs (required subsection)
   - **External Tools**: External tools with versions (required subsection)

4. **## Phase N: [Phase Title]** (one or more required)
   - **Objective**: Phase objective statement
   - **Tasks**: Numbered list with `- [ ] N.1 Description` format
   - **Subtasks**: Optional `- [ ] N.M.1 Description` for task decomposition
   - **VERIFY Phase N**: Immediately following tasks with verification criteria

5. **## Success Criteria** (required)
   - **Functional Requirements**: `- [ ] [Criterion]`
   - **Quality Requirements**: `- [ ] [Criterion]`

6. **## Risks** (required)
   - Table format with columns: Risk | Impact | Likelihood | Mitigation

### Naming Conventions

**Sub-Command Notation**:
- Use colon notation: `/explore:quick`, `/analyze:security`
- Pattern: `/{command}:{subcommand}`
- NOT space-separated or hyphenated

**Model Identifiers**:
- Short-form only: `opus`, `sonnet`, `haiku`
- NOT full model IDs (e.g., NOT `claude-opus-4-5-20251101`)

**Artifact Type Names** (kebab-case):
- Correct: `validation-report`, `architecture-document`, `codebase-map`
- Incorrect: `validation_report`, `validationReport`

**File and Directory Names** (kebab-case):
- Plan files: `implement-{command}-command.md` (e.g., `implement-explore-command.md`)
- Output directories: `docs/plan-outputs/{plan-name}/`
- Artifact files: `{artifact-type}.{format}`
- Finding files: `{task-id}-{description}.md`

**Priority Naming**:
- Use exact format: `P0`, `P1`, `P2`
- P0: "Critical Path" (Foundation commands)
- P1: "Important" (Core functionality)
- P2: "Enhancement" (Nice-to-have)

### Metadata Requirements

**Artifact Base Metadata** - All artifacts MUST include in YAML frontmatter or JSON header:
```yaml
artifact_type: string        # From artifact type registry (kebab-case)
version: string              # Semantic version (1.0.0)
created_at: string           # ISO-8601 timestamp
created_by: string           # Model identifier (sonnet, opus, haiku)
command: string              # Producing command (/explore)
subcommand: string           # Producing sub-command (quick)
status: string               # draft | active | superseded | archived
```

**Plan Output Directory Structure**:
```
docs/plan-outputs/implement-{command-name}/
├── artifacts/           # Generated artifacts
├── findings/            # Task findings and analysis
├── verification/        # Verification results
└── status.json          # Task status tracking (AUTHORITATIVE)
```

### Quality Requirements

**Test Coverage Targets**:
| Priority | Target | Category |
|----------|--------|----------|
| **P0** | > 95% | Foundation code |
| **P1** | > 85% | Core functionality |
| **P2** | > 80% | Enhancements |

**Code Quality Gates**:
```yaml
gates:
  critical: 0      # Zero critical issues allowed
  high: 5          # Maximum 5 high severity
  medium: 20       # Maximum 20 medium severity
  low: unlimited   # No limit on low severity
  coverage: 85     # Minimum test coverage percentage
```

---

## Gaps Identified

### 1. Task Complexity Classification Standards
**Gap**: No standard guidance for when to break tasks into subtasks or use `/plan:split`
**Impact**: Plans may be over-decomposed or under-decomposed inconsistently

### 2. Inter-Plan Dependencies Documentation
**Gap**: Dependencies section documents upstream/downstream commands, but no guidance for cross-plan coordination
**Impact**: Multi-phase initiatives lack explicit sequencing requirements

### 3. Plan Template Variable Validation
**Gap**: No formal schema or validation for template variables
**Impact**: Inconsistent variable naming across templates; no automated validation

### 4. Task Estimation and Time Tracking
**Gap**: No standards for task estimation, actual duration, or time tracking
**Impact**: Difficult to predict plan completion time or identify scope creep

### 5. Findings File Organization Standards
**Gap**: Limited guidance on findings file naming and structure beyond `{task-id}-{description}.md`
**Impact**: Findings vary widely in format and completeness

### 6. Approval/Sign-Off Process
**Gap**: No standards for plan review, approval, or stakeholder sign-off
**Impact**: Plans can be marked complete without business validation

### 7. Plan Versioning and Evolution
**Gap**: No standards for handling plan revisions or scope changes mid-execution
**Impact**: Can't track if a plan was modified after creation or changed scope

### 8. Phase-to-Phase Data Flow
**Gap**: Limited documentation of how phases hand off work
**Impact**: Unclear dependencies between phases; harder to parallelize or reuse phases

### 9. Error Handling and Recovery Standards
**Gap**: Plan structure has Risks section but no standard error resolution workflow
**Impact**: Inconsistent recovery behavior across plans

### 10. Plan Reusability and Template Library
**Gap**: No standards for plans that are reusable templates vs. one-time plans
**Impact**: Can't build plan libraries for common workflows

### 11. Metadata Completeness Requirements
**Gap**: Overview section defines minimum fields but no other plan-level metadata standards
**Impact**: Difficult to search/filter/prioritize plans

### 12. Status.json Evolution and Backwards Compatibility
**Gap**: No standards for status.json schema evolution
**Impact**: Format changes could break existing plans

### 13. Batch Task Execution Semantics
**Gap**: `/plan:batch` supports multiple execution modes but standards don't define batch semantics
**Impact**: Unpredictable execution order for dependent tasks

### 14. Quality Gate Configuration Customization
**Gap**: Standards define standard/strict/permissive modes but no process for overriding gates
**Impact**: Unclear when to apply non-standard gates

### 15. Success Criteria Measurability
**Gap**: Standards require measurable criteria but provide limited examples
**Impact**: Success criteria may be vague or unmeasurable

---

## Conflicts Found

### 1. Plan File Immutability vs. Task Changes
**Conflict**: ARCHITECTURE.md states plan file is "read-only" during execution, but `/plan:split` command breaks tasks into subtasks
**Resolution**: Likely intended that status.json tracks subtasks, not the markdown file - but this isn't explicitly documented

### 2. Phase Verification vs. Task Verification
**Conflict**: Standards define `VERIFY Phase N:` sections for phase-level verification, but `/plan:verify` talks about verifying individual tasks
**Resolution**: Need to distinguish "task is done" vs. "task is still valid"

### 3. Sub-Command Priority Table Location
**Conflict**: Standards require Sub-Command Priority Table in Overview, but CANONICAL-COMMAND-TEMPLATE.md doesn't include it
**Resolution**: Template doesn't model the required standards; plans may miss this section

### 4. Artifact Discovery vs. Registry Requirement
**Conflict**: Discovery section defines three-tier fallback, but unclear if artifact registration is mandatory or optional
**Resolution**: Registry is PRIMARY method but fallbacks exist - standards don't clearly state if registration is required

### 5. Output Directory Naming Convention
**Conflict**: Standards use `{plan-name}` but don't clarify if it's full filename or basename
**Resolution**: ARCHITECTURE.md clarifies it uses basename - but implementation-plan-standards.md doesn't use this terminology

### 6. Coverage Reporting Format
**Conflict**: Standards say exceptions require ADR but don't specify if ADR should be referenced in the plan
**Resolution**: Unclear process for documenting coverage exceptions

---

## Summary Table

| Category | Status | Details |
|----------|--------|---------|
| **Authoritative Source** | ✓ Clear | `implementation-plan-standards.md` (v1.0) is the authority |
| **Required Sections** | ✓ Well-Defined | Overview, Dependencies, Phases, VERIFY, Success Criteria, Risks |
| **Naming Conventions** | ✓ Well-Defined | Kebab-case files, colon notation subcommands, snake_case metadata |
| **Quality Standards** | ✓ Well-Defined | Coverage targets, gate thresholds, severity levels |
| **Artifact Standards** | ✓ Well-Defined | Metadata fields, discovery patterns, schemas |
| **Plan Metadata** | ⚠ Gap | No plan-level classification, author, scope boundary fields |
| **Task Decomposition** | ⚠ Gap | No criteria for when to use subtasks |
| **Inter-Plan Coordination** | ⚠ Gap | No workflow ordering or multi-plan dependencies |
| **Task Duration/Estimation** | ⚠ Gap | No time tracking or effort estimation standards |
| **Findings Format** | ⚠ Gap | No standard structure for findings files |
| **Error Recovery** | ⚠ Gap | No standard for recoverable vs. non-recoverable tasks |
| **Batch Semantics** | ⚠ Gap | Unclear serial vs. parallel execution |
