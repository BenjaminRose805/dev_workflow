# Task 2.2: Duplicate and Overlapping Documentation

## Executive Summary

The project contains significant documentation overlap, particularly around orchestrator/plan execution (3 files covering the same system), plan migration guidance (2 files with overlapping content), and templates (45+ nearly-identical command templates with 95%+ structural similarity). The most critical duplication is the orchestrator documentation split across `/docs/ORCHESTRATOR.md`, `/docs/ARCHITECTURE.md`, and `/docs/architecture/orchestrator-system.md`, which creates confusion about the authoritative source. Additionally, the 38 implement-command templates share extensive boilerplate that could be consolidated into the canonical template.

## docs/plan-system/ vs docs/standards/ Comparison

### Overlapping Topics

| Topic | plan-system File | standards File | Overlap Level | Recommendation |
|-------|------------------|----------------|---------------|----------------|
| Plan migration | MIGRATION-GUIDE.md | N/A | NONE | Keep in plan-system (no overlap) |
| Archived plans | COMPLETED-PLANS.md | N/A | NONE | Keep in plan-system (no overlap) |
| Implementation standards | N/A | implementation-plan-standards.md | NONE | Keep in standards (no overlap) |

### Details

**No significant overlap identified.** The `docs/plan-system/` directory focuses on operational procedures (migration, archiving), while `docs/standards/` focuses on authoring standards and conventions. They serve complementary purposes without content duplication.

## Same Topic in Different Locations

### Orchestrator Documentation (HIGH PRIORITY)

| Topic | Files | Overlap Level | Recommendation |
|-------|-------|---------------|----------------|
| Orchestrator system architecture | `/docs/ORCHESTRATOR.md`<br>`/docs/ARCHITECTURE.md`<br>`/docs/architecture/orchestrator-system.md` | **HIGH** (85%) | **Consolidate into single file** |

**Details:**
- **ORCHESTRATOR.md** (424 lines): Quick reference, troubleshooting, component list, status.json format
- **ARCHITECTURE.md** (194 lines): System overview, workflow, data flow, design decisions (includes orchestrator section lines 13-19, 77-115)
- **architecture/orchestrator-system.md** (341 lines): Detailed architecture diagrams, data flow, recovery mechanisms

**Content Overlap:**
- All three describe `status.json` schema (lines 196-304 in ORCHESTRATOR.md, lines 256-304 in orchestrator-system.md)
- All three explain status-cli.js commands (lines 63-76 in ARCHITECTURE.md, lines 32-51 in orchestrator-system.md, lines 114-191 in ORCHESTRATOR.md)
- All three describe file locking and recovery (ARCHITECTURE.md lines 186-189, orchestrator-system.md lines 215-252, ORCHESTRATOR.md lines 320-367)
- Component responsibilities duplicated across all three files

**Recommended Consolidation:**
1. **Keep:** `/docs/architecture/orchestrator-system.md` as the **authoritative source**
2. **Merge from ORCHESTRATOR.md:** Troubleshooting section (lines 320-424), quick commands (lines 162-178)
3. **Merge from ARCHITECTURE.md:** Design decisions (lines 173-194), key principles (lines 20-25)
4. **Remove:** ORCHESTRATOR.md and orchestrator section from ARCHITECTURE.md
5. **Create:** Short redirect file at `/docs/ORCHESTRATOR.md` pointing to `/docs/architecture/orchestrator-system.md`

### Plan Migration/Archive Documentation (MEDIUM PRIORITY)

| Topic | Files | Overlap Level | Recommendation |
|-------|-------|---------------|----------------|
| Plan migration procedures | `/docs/plan-system/MIGRATION-GUIDE.md`<br>`/docs/plan-system/COMPLETED-PLANS.md` | **MEDIUM** (40%) | **Keep separate but cross-reference** |

**Details:**
- **MIGRATION-GUIDE.md** (228 lines): How to migrate plans (active, completed, legacy)
- **COMPLETED-PLANS.md** (185 lines): What completed plans are, when/how to migrate them

**Content Overlap:**
- Both explain migration commands (MIGRATION-GUIDE.md lines 34-50, COMPLETED-PLANS.md lines 44-68)
- Both describe what migration does (MIGRATION-GUIDE.md lines 44-50, COMPLETED-PLANS.md lines 70-82)
- Both provide migration best practices (MIGRATION-GUIDE.md lines 177-220, COMPLETED-PLANS.md lines 119-145)

**Recommendation:**
- **Keep both files** (different audiences)
- **MIGRATION-GUIDE.md**: Procedural guide for HOW to migrate
- **COMPLETED-PLANS.md**: Conceptual guide for WHAT/WHEN/WHY regarding archived plans
- **Add cross-references** at top of each file
- **Remove duplication** of command examples (keep in MIGRATION-GUIDE.md, reference from COMPLETED-PLANS.md)

### Architecture/Vision Documentation (LOW PRIORITY)

| Topic | Files | Overlap Level | Recommendation |
|-------|-------|---------------|----------------|
| System vision & architecture | `/docs/VISION.md`<br>`/docs/ARCHITECTURE.md` | **LOW** (20%) | **Keep separate** |

**Details:**
- **VISION.md** (165 lines): High-level philosophy, command categories, workflow examples
- **ARCHITECTURE.md** (194 lines): Technical implementation, data flow, component details

**Minor Overlap:**
- Both list commands (VISION.md lines 22-59, ARCHITECTURE.md lines 37-51)
- Both describe workflow patterns (VISION.md lines 60-94, ARCHITECTURE.md lines 143-150)

**Recommendation:** Keep separate - different purposes (vision vs. implementation)

## Template Consolidation Opportunities

### Nearly Identical Templates (HIGH PRIORITY)

| Template Category | Count | Similarity | Recommendation |
|-------------------|-------|------------|----------------|
| implement-*-command.md | 38 templates | **95%+** | **Consolidate boilerplate** |
| implement-*-agent.md | 4 templates | **90%+** | **Merge common sections** |
| implement-*-hook.md | 4 templates | **92%+** | **Merge common sections** |

**Detailed Analysis:**

#### Command Templates (38 files, 14,646 total lines)

**Identical sections across all templates:**
- Phase 1: Command Infrastructure (identical structure)
- Phase 5: Testing & Validation (identical wording)
- Phase 6: Documentation & Integration (identical wording)
- Success Criteria format (identical)
- Risks table format (identical)
- Template Variables Reference section (identical)

**Structural Analysis:**
```
Lines 1-15:     Overview (template variables: 95% identical)
Lines 16-30:    Description (template variables: 100% identical)
Lines 31-45:    Dependencies (100% identical structure)
Lines 46-60:    Phase 1 Infrastructure (95% identical)
Lines 61-90:    Phase 2 varies by command (50% unique)
Lines 91-130:   Phase 3 Sub-commands (80% identical structure)
Lines 131-145:  Phase 4 Artifacts (90% identical)
Lines 146-160:  Phase 5 Testing (100% identical)
Lines 161-175:  Phase 6 Documentation (100% identical)
Lines 176-190:  Success Criteria (100% identical)
Lines 191-200:  Risks table (100% identical format)
Lines 201-END:  Template variables (100% identical)
```

**Recommendation:**
1. **Update CANONICAL-COMMAND-TEMPLATE.md** with all common boilerplate
2. **Keep 38 individual templates** but reduce to ~100-150 lines each (command-specific content only)
3. **Add** "See CANONICAL-COMMAND-TEMPLATE.md for full structure" at top of each
4. **Remove** duplicate Success Criteria, Testing, Documentation, Risks sections from individual files

**Space Savings:** ~10,000 lines (68% reduction)

#### Generic Templates (Analysis, Documentation, Validation)

| Template 1 | Template 2 | Similarity | Recommendation |
|------------|------------|------------|----------------|
| TEMPLATE.md | analysis.md | 60% | **Keep separate** - different use cases |
| TEMPLATE.md | documentation.md | 55% | **Keep separate** - different use cases |
| TEMPLATE.md | validation.md | 58% | **Keep separate** - different use cases |

**Details:** These templates share format conventions (checkbox syntax, VERIFY sections, output directory references) but have distinct phase structures for different workflows. The overlap is in formatting standards, not content.

**Recommendation:** Keep all generic templates separate - they serve different plan types.

## Consolidation Recommendations

### Priority Merges (HIGH duplication)

1. **Merge orchestrator documentation into single file**
   - **Action:** Consolidate `/docs/ORCHESTRATOR.md` and orchestrator sections from `/docs/ARCHITECTURE.md` into `/docs/architecture/orchestrator-system.md`
   - **Reason:** Eliminates 85% content duplication, creates single authoritative source
   - **Impact:** Removes ~400 duplicate lines, improves maintainability
   - **Effort:** Medium (2-3 hours to carefully merge sections)

2. **Consolidate command template boilerplate**
   - **Action:** Reduce 38 implement-*-command templates from 200+ lines to ~100-150 lines by removing duplicate boilerplate
   - **Reason:** 95%+ structural similarity, massive duplication
   - **Impact:** Saves ~10,000 lines, easier maintenance
   - **Effort:** High (requires updating 38 files, but mechanical work)

### Optional Merges (MEDIUM duplication)

1. **Cross-reference plan migration docs**
   - **Action:** Add cross-references between MIGRATION-GUIDE.md and COMPLETED-PLANS.md, remove duplicate command examples
   - **Reason:** 40% overlap in migration procedures
   - **Impact:** Reduces ~80 duplicate lines, clearer separation of concerns
   - **Effort:** Low (1 hour)

2. **Deduplicate status.json schema documentation**
   - **Action:** Define schema once in `/docs/architecture/orchestrator-system.md`, reference from other locations
   - **Reason:** Schema appears in 3+ locations verbatim
   - **Impact:** Single source of truth for schema
   - **Effort:** Low (included in orchestrator merge above)

### Keep Separate (justified differences)

1. **VISION.md and ARCHITECTURE.md**
   - **Reason:** Serve different audiences (product vision vs. technical implementation)
   - **Overlap:** Only 20% overlap in command listings
   - **Action:** Keep both, ensure they reference each other

2. **plan-system/ and standards/ directories**
   - **Reason:** Operational procedures vs. authoring standards (complementary, not duplicate)
   - **Overlap:** None
   - **Action:** No changes needed

3. **Generic plan templates (analysis.md, documentation.md, validation.md)**
   - **Reason:** Different workflow patterns for different plan types
   - **Overlap:** Only formatting conventions, not content
   - **Action:** Keep all separate

4. **TEMPLATE.md vs CANONICAL-COMMAND-TEMPLATE.md**
   - **Reason:** TEMPLATE.md is for generic plans, CANONICAL-COMMAND-TEMPLATE.md is specifically for command implementation plans
   - **Overlap:** Format conventions only
   - **Action:** Keep both (serve different purposes)

## Implementation Priority

### Phase 1 (Immediate - High Impact)
1. Merge orchestrator documentation (removes 85% duplication in critical area)
2. Add cross-references to migration docs (reduces confusion)

### Phase 2 (Short-term - High Value)
1. Update CANONICAL-COMMAND-TEMPLATE.md with full boilerplate
2. Reduce individual command templates to command-specific content only

### Phase 3 (Long-term - Maintenance)
1. Regular audits for new documentation duplication
2. Establish documentation review process to prevent future duplication

---

**Files Analyzed:** 80+ documentation files
**Total Duplication Found:** ~11,000 lines
**Highest Priority:** Orchestrator docs (3 files â†’ 1 file)
**Highest Volume:** Command templates (38 files, 95%+ duplication)
