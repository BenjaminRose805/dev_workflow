# Task 4.1: Document current status-cli.js output format

## Current Output Format Analysis

### `cmdProgress` function (lines 873-1072)

The `cmdProgress` function in `scripts/status-cli.js` supports three output formats:

#### 1. Text format (default)
```
Plan: {planName}
Progress: [{bar}] {percentage}%

  ✓ Completed: {N}
  ◯ Pending: {N}
  ⏳ In Progress: {N}
  ✗ Failed: {N}
  ⊘ Skipped: {N}

Total: {N} tasks
Current Phase: {phaseName}
Last Updated: {timestamp}

Git Queue: {N} commit(s) pending (if applicable)
```

#### 2. JSON format (--format=json)
Returns structured JSON with:
- `plan`: path, name, status
- `summary`: total, completed, in_progress, pending, failed, skipped, percentage
- `phases`: array of phase progress
- `currentPhase`, `lastUpdated`
- `gitQueue`: pending count, isProcessing (if applicable)

#### 3. Markers format (--format=markers)
Outputs parseable progress markers:
```
[PROGRESS] plan status={status} percent={N}
[PROGRESS] phase={N} status={status} percent={N}
[PROGRESS] task={id} status=started
[PROGRESS] summary completed={N} pending={N} failed={N}
```

### `cmdStatus` function (lines 176-209)

Outputs JSON matching plan-orchestrator.js format:
- `planPath`, `planName`, `source`
- `total`, `completed`, `inProgress`, `pending`, `failed`, `skipped`
- `percentage`, `currentPhase`

## Identified Insertion Points for Git Info

### For `cmdProgress` (text format):
After "Last Updated:" line (line 1056), add:
```
Git Branch: {branchName}
```

### For `cmdProgress` (JSON format):
Add to `jsonOutput` object (around line 958):
```javascript
git: {
  branch: currentBranch,
  uncommittedCount: N,
  lastCommit: { sha: "abc1234", message: "..." }
}
```

### For `cmdProgress` (markers format):
Add after plan marker:
```
[PROGRESS] git branch={branchName} uncommitted={N}
```

### For `/plan:status` command:
The markdown file `.claude/commands/plan/status.md` shows status display templates.
Add git info section after "Status Source" in section 4b.

## Implementation Approach

1. Create `getGitInfo()` helper function that returns:
   - `branch`: current branch name
   - `uncommittedCount`: number of uncommitted files
   - `lastCommit`: `{ sha, message }` abbreviated

2. Call `getGitInfo()` at start of progress/status functions

3. Add git info to each output format
