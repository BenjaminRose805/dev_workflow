# Task 9.2: Git Workflow Features NOT in Current TUI Plan

**Date:** 2025-12-26
**Source:** Phase 1 inventory (tasks 1.1-1.4) vs tui-integration-implementation.md
**Purpose:** Identify git workflow features missing from current TUI plan

---

## Summary

Comparing the git workflow feature inventory from Phase 1 against the current TUI plan reveals **15 missing git features**. The current TUI plan focuses on command execution and visualization but has no git-specific panels or controls.

---

## Current TUI Plan Git Coverage

### What's In the Current Plan

| Feature | Location in Plan | Coverage |
|---------|-----------------|----------|
| None | - | **0% git coverage** |

The current TUI plan (`tui-integration-implementation.md`) contains **no git-specific features**. It focuses on:
- Keyboard navigation
- Information panels (progress, tasks, activity)
- Command integration (`:` palette)
- Dependency visualization

---

## Missing Git Workflow Features

### Category A: Branch Status Display

| Feature | Source | Impact | Description |
|---------|--------|--------|-------------|
| **Current branch display** | 1.4 | HIGH | Show `plan/my-feature` in header/footer |
| **Branch validation** | 1.4 | HIGH | ✓/⚠/✗ icon if on correct plan branch |
| **Commits ahead indicator** | 1.4 | MEDIUM | Show `5 commits ahead of main` |
| **Uncommitted files count** | 1.4 | HIGH | Badge showing `2 uncommitted` |

### Category B: Commit Operations

| Feature | Source | Impact | Description |
|---------|--------|--------|-------------|
| **Last commit display** | 1.4 | MEDIUM | Show `abc1234 [plan] task 1.1: ...` |
| **Commit queue status** | 5.5 | MEDIUM | Panel showing pending commits |
| **Commit history stream** | 5.5 | LOW | Real-time commit log in activity |
| **"Waiting for git" indicator** | 5.5 | MEDIUM | Show `⟳` when commit in progress |

### Category C: Completion Workflow

| Feature | Source | Impact | Description |
|---------|--------|--------|-------------|
| **Pre-completion checklist** | 1.4 | HIGH | Overlay showing completion requirements |
| **Merge strategy selector** | 1.2 | MEDIUM | Radio selector for squash/merge |
| **Conflict resolution modal** | 1.2 | HIGH | Handle merge conflicts |
| **Archive browser panel** | 1.2 | LOW | Browse completed plan archives |

### Category D: Branch Operations

| Feature | Source | Impact | Description |
|---------|--------|--------|-------------|
| **Branch switcher** | 1.4 | MEDIUM | Modal to switch between plan branches |
| **Stash management** | 1.1 | LOW | View/apply stashes |
| **Branch creator** | 1.1 | LOW | Create new plan branches |

---

## Gap Analysis Summary

### By Priority

| Priority | Count | Features |
|----------|-------|----------|
| **HIGH** | 5 | Branch display, validation, uncommitted, pre-complete, conflicts |
| **MEDIUM** | 6 | Commits ahead, last commit, queue, waiting, merge strategy, switcher |
| **LOW** | 4 | Commit stream, archive browser, stash, branch creator |

### By Implementation Type

| Type | Count | Features |
|------|-------|----------|
| **Display (read-only)** | 8 | Branch, validation, ahead, uncommitted, last, queue, stream, waiting |
| **Control (user action)** | 4 | Switcher, pre-complete, conflicts, stash |
| **Modal/Overlay** | 3 | Pre-complete, merge strategy, conflicts |

---

## Specific Feature Details

### 1. Git Status Panel (Missing)

**Proposed in task 1.4:**
```
┌─ Git ────────────────────────────────────────────────────────┐
│ Branch: plan/my-feature ✓  | 2 files  | 5 commits ahead      │
│ Last: abc1234 [plan] task 1.1: Add authentication            │
└──────────────────────────────────────────────────────────────┘
```

**Why missing:** Current TUI plan has no git awareness at all.

**Data source:** `getGitInfo()` from status-cli.js already provides this data.

### 2. Commit Queue Panel (Missing)

**Proposed in task 5.5:**
```
┌─ Git Commit Queue ────────────────────┐
│ ⟳ Processing: [plan] task 2.1...      │
│                                       │
│ Pending:                              │
│   1. [plan] task 2.2: Add tests       │
│   2. [plan] task 2.3: Update docs     │
│                                       │
│ Stats: 15 total │ 0 failed            │
└───────────────────────────────────────┘
```

**Why missing:** Current TUI has no parallel execution awareness.

**Data source:** `getQueueStatus()` from git-queue.js

### 3. Pre-Completion Check (Missing)

**Proposed in task 1.4:**
```
┌─ Complete Plan Check ────────────────────────────────────────┐
│ ✓ All tasks completed (15/15)                                │
│ ✓ On correct branch (plan/my-feature)                        │
│ ⚠ 2 uncommitted changes                                      │
│ ✓ No merge conflicts with main                               │
│                                                              │
│ Ready to complete. Press [c] to continue or [q] to cancel.   │
└──────────────────────────────────────────────────────────────┘
```

**Why missing:** Current TUI has no workflow completion controls.

**Data sources:** Multiple - branch validation, uncommitted count, task status

---

## Integration Points with Current TUI Plan

### Potential Amendments

If amending the existing TUI plan:

| Current Phase | Possible Addition |
|---------------|-------------------|
| Phase 2 (Quick Win Panels) | Git status row in footer |
| Phase 3 (Command Integration) | Git commands in palette |
| Phase 5 (Polish) | Full git status panel |

### New Phase Needed For

- Pre-completion workflow (3+ tasks)
- Conflict resolution modal (2+ tasks)
- Commit queue visualization (2+ tasks)

---

## Data Availability

All missing features have **data sources already implemented**:

| Feature | Data Source | Implementation Status |
|---------|-------------|----------------------|
| Branch info | `git branch --show-current` | Available |
| Uncommitted | `git status --porcelain` | Available |
| Commits ahead | `git rev-list --count` | Available |
| Branch validation | `.claude/git-workflow.json` | Available |
| Commit queue | `getQueueStatus()` | Available |
| Pre-completion check | Multiple sources | Needs aggregation |

---

## Recommendations

### Quick Wins (Add to Phase 2)

1. **Git info in footer** - Branch name + uncommitted count
2. **Branch validation badge** - ✓/⚠ in header

### Medium Effort (New Phase or Extend Phase 5)

3. **Git status panel** - Collapsible row with full info
4. **Commit queue indicator** - Show pending commits

### Larger Features (May Need New Plan)

5. **Pre-completion workflow** - Multi-step modal flow
6. **Conflict resolution** - Interactive merge UI

---

## Verification Criteria

- [x] Compared Phase 1 inventory with current TUI plan
- [x] Identified 15 missing git features
- [x] Categorized by priority (HIGH/MEDIUM/LOW)
- [x] Noted data availability for each feature
- [x] Proposed integration points

---

**End of Analysis**
