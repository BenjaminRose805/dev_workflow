# Task 1.4: UI Components to Functionality Mapping

## Component Directory Structure

```
components/
├── activity/           # Activity feed components
├── common/             # Shared utility components
├── findings/           # Task findings/outputs
├── layout/             # Navigation and layout
├── orchestrator/       # Orchestrator management
├── performance/        # PWA and optimization
├── plan/               # Plan visualization
├── providers/          # Context providers
├── task/               # Task management
└── ui/                 # shadcn/ui base components
```

## Activity Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `ActivityItem` | activity-item.tsx | Single activity event display | Icons, Badge, formatting |
| `ActivityTab` | activity-tab.tsx | Activity feed for orchestrator | useActivity, WebSocket |
| `ToolCallDetail` | tool-call-detail.tsx | Detailed tool call view | Dialog, syntax highlighting |

**Functionality:**
- Display activity events with icons and timestamps
- Filter and search activity
- Real-time WebSocket updates
- View tool call details

## Common Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `CommandPalette` | command-palette.tsx | Keyboard command interface | Dialog, commands lib |
| `NotificationCenter` | notification-center.tsx | Toast notification system | Sonner, WebSocket |

**Functionality:**
- ⌘K keyboard shortcut navigation
- Command search and execution
- In-app notifications for events

## Findings Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `FindingList` | finding-list.tsx | List of task findings | useFindings |
| `FindingViewer` | finding-viewer.tsx | Markdown finding display | Markdown rendering |
| `FindingsTab` | findings-tab.tsx | Findings container | FindingList, FindingViewer |

**Functionality:**
- Browse task findings
- View markdown content
- Copy finding content

## Layout Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `Breadcrumbs` | breadcrumbs.tsx | Navigation breadcrumb trail | Router, pathname |
| `Header` | header.tsx | Top navigation bar | CommandPalette trigger |
| `Sidebar` | sidebar.tsx | Side navigation menu | Router, icons |

**Functionality:**
- Global navigation
- Current page indication
- Mobile menu support

## Orchestrator Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `ControlButtons` | control-buttons.tsx | Pause/Resume/Stop buttons | Mutations |
| `OrchestratorCard` | orchestrator-card.tsx | Orchestrator summary card | Progress, Badge |
| `OrchestratorHeader` | orchestrator-header.tsx | Detail page header | ControlButtons, status |
| `OrchestratorStatus` | orchestrator-status.tsx | Status badge | Badge |
| `OverviewTab` | overview-tab.tsx | Dashboard overview tab | Stats, charts |
| `StartOrchestratorDialog` | start-orchestrator-dialog.tsx | Start new orchestrator | Dialog, form |

**Functionality:**
- Display orchestrator status and progress
- Control orchestrator (pause/resume/stop)
- Start new orchestrators with configuration
- Overview statistics

## Performance Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `ErrorBoundary` | error-boundary.tsx | Error catching | React error boundary |
| `OfflineIndicator` | offline-indicator.tsx | Offline status | Online/offline events |
| `ServiceWorkerRegistration` | service-worker-registration.tsx | PWA registration | Service worker API |
| `SkeletonLoaders` | skeleton-loaders.tsx | Loading skeletons | Skeleton UI |
| `VirtualList` | virtual-list.tsx | Virtualized list | TanStack Virtual |

**Functionality:**
- Graceful error handling
- Offline detection and UI
- PWA installation
- Efficient large list rendering

## Plan Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `DependencyGraph` | dependency-graph.tsx | Task dependency DAG | SVG, D3-like layout |
| `PhaseProgress` | phase-progress.tsx | Phase completion display | Progress bar |
| `PhaseTimeline` | phase-timeline.tsx | Timeline visualization | SVG |
| `PlanCard` | plan-card.tsx | Plan summary card | Badge, Progress |
| `RunHistoryTable` | run-history-table.tsx | Past runs table | Table |
| `StatusChart` | status-chart.tsx | Task status pie chart | SVG |

**Functionality:**
- Visualize task dependencies
- Show phase completion
- Display run history
- Status distribution charts

## Provider Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `QueryProvider` | query-provider.tsx | TanStack Query setup | @tanstack/react-query |
| `ThemeProvider` | theme-provider.tsx | Theme context | next-themes |

**Functionality:**
- Query caching and invalidation
- Dark/light theme switching

## Task Components

| Component | File | Purpose | Dependencies |
|-----------|------|---------|--------------|
| `PhaseSection` | phase-section.tsx | Collapsible phase group | TaskRow |
| `SkipTaskDialog` | skip-task-dialog.tsx | Skip task modal | Dialog, form |
| `TaskActions` | task-actions.tsx | Skip/Retry buttons | Mutations |
| `TaskRow` | task-row.tsx | Single task display | TaskStatusBadge, actions |
| `TaskStatusBadge` | task-status-badge.tsx | Status indicator | Badge |
| `TasksTab` | tasks-tab.tsx | Task list container | PhaseSection |

**Functionality:**
- Display tasks grouped by phase
- Task status visualization
- Skip task with reason
- Retry failed tasks

## UI Base Components (shadcn/ui)

| Component | Purpose |
|-----------|---------|
| `Badge` | Status labels |
| `Button` | Interactive buttons |
| `Card` | Content containers |
| `Dialog` | Modal dialogs |
| `DropdownMenu` | Context menus |
| `Input` | Text input fields |
| `Popover` | Floating content |
| `Progress` | Progress bars |
| `ScrollArea` | Scrollable regions |
| `Select` | Dropdown select |
| `Separator` | Visual dividers |
| `Skeleton` | Loading placeholders |
| `Sonner` | Toast notifications |
| `Table` | Data tables |
| `Tabs` | Tabbed interfaces |
| `Tooltip` | Hover tooltips |

## Component Hierarchy

```
App (layout.tsx)
├── ThemeProvider
│   └── QueryProvider
│       ├── Header
│       │   └── CommandPalette
│       ├── Sidebar
│       └── [Page Content]
│           ├── Dashboard (/)
│           │   ├── StatCard
│           │   ├── OrchestratorMiniCard
│           │   └── ActivityItem
│           ├── Orchestrators (/orchestrators)
│           │   └── OrchestratorCard
│           │       └── ControlButtons
│           ├── OrchestratorDetail (/orchestrators/[id])
│           │   ├── OrchestratorHeader
│           │   ├── OverviewTab
│           │   ├── TasksTab
│           │   │   └── PhaseSection
│           │   │       └── TaskRow
│           │   ├── ActivityTab
│           │   │   └── ActivityItem
│           │   ├── FindingsTab
│           │   │   ├── FindingList
│           │   │   └── FindingViewer
│           │   └── DependencyGraph
│           ├── Plans (/plans)
│           │   └── PlanCard
│           └── PlanDetail (/plans/[name])
│               ├── PhaseProgress
│               ├── RunHistoryTable
│               └── StartOrchestratorDialog
```

## Component to Feature Matrix

| Feature | Components Used |
|---------|-----------------|
| View Orchestrators | OrchestratorCard, OrchestratorStatus |
| Control Orchestrator | ControlButtons, OrchestratorHeader |
| Start Orchestrator | StartOrchestratorDialog |
| View Tasks | TasksTab, PhaseSection, TaskRow |
| Task Actions | TaskActions, SkipTaskDialog |
| View Activity | ActivityTab, ActivityItem |
| Real-time Updates | WebSocket hooks, NotificationCenter |
| View Findings | FindingsTab, FindingList, FindingViewer |
| Visualize Dependencies | DependencyGraph |
| View Plans | PlanCard, PhaseProgress |
| Run History | RunHistoryTable |
| Navigation | Sidebar, Header, Breadcrumbs |
| Commands | CommandPalette |
| Settings | Settings page (no dedicated components) |
| PWA | ServiceWorkerRegistration, OfflineIndicator |

## Lines of Code by Category

| Category | Files | LOC |
|----------|-------|-----|
| activity | 4 | ~1,350 |
| common | 3 | ~850 |
| findings | 4 | ~1,000 |
| layout | 4 | ~350 |
| orchestrator | 7 | ~1,400 |
| performance | 6 | ~600 |
| plan | 7 | ~2,000 |
| providers | 3 | ~100 |
| task | 7 | ~1,400 |
| ui | 17 | ~1,500 |
| **Total** | **62** | **~10,550** |
