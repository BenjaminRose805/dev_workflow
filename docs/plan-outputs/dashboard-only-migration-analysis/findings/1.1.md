# Task 1.1: Orchestrator Dashboard Structure Analysis

## Overview

The orchestrator-dashboard is a Next.js 16 application built with React 19, using modern patterns and shadcn/ui components. It provides a web-based interface for monitoring and controlling plan orchestration.

## Project Structure

```
orchestrator-dashboard/
├── src/
│   ├── app/                    # Next.js App Router pages
│   │   ├── page.tsx           # Dashboard home
│   │   ├── layout.tsx         # Root layout with providers
│   │   ├── activity/          # Activity feed page
│   │   ├── orchestrators/     # Orchestrators list + detail pages
│   │   │   ├── page.tsx       # List view
│   │   │   └── [id]/page.tsx  # Detail view with tabs
│   │   ├── plans/             # Plans list + detail pages
│   │   │   ├── page.tsx       # List view
│   │   │   └── [name]/        # Detail, status, history pages
│   │   ├── settings/          # User settings page
│   │   ├── offline/           # Offline fallback page
│   │   └── api/health/        # Health check API route
│   ├── components/            # UI components (~89 files, 8675 LOC)
│   │   ├── activity/          # Activity feed components
│   │   ├── common/            # Shared utility components
│   │   ├── findings/          # Findings viewer components
│   │   ├── layout/            # Header, sidebar, breadcrumbs
│   │   ├── orchestrator/      # Orchestrator cards, controls
│   │   ├── performance/       # PWA, virtualization, error handling
│   │   ├── plan/              # Plan cards, dependency graph, phases
│   │   ├── providers/         # Context providers (theme, query)
│   │   ├── task/              # Task list, actions, status badges
│   │   └── ui/                # shadcn/ui base components
│   ├── hooks/                 # Custom React hooks
│   │   ├── use-command-palette.ts  # Keyboard command palette
│   │   ├── use-mobile-menu.tsx     # Mobile navigation
│   │   └── use-swipe.tsx           # Touch gestures
│   └── lib/                   # Utilities and API client
│       ├── api/               # API client and hooks
│       │   ├── client.ts      # REST API functions
│       │   ├── hooks.ts       # React Query hooks
│       │   ├── types.ts       # TypeScript interfaces
│       │   ├── websocket.ts   # WebSocket connection
│       │   └── use-realtime-orchestrators.ts
│       ├── commands.ts        # Command palette definitions
│       ├── service-worker.ts  # PWA service worker
│       └── utils.ts           # Utility functions (cn)
├── public/                    # Static assets
├── package.json               # Dependencies
├── next.config.ts             # Next.js configuration
└── tsconfig.json              # TypeScript configuration
```

## Technology Stack

| Category | Technology | Version |
|----------|------------|---------|
| Framework | Next.js | 16.1.1 |
| React | React | 19.2.3 |
| UI Library | shadcn/ui + Radix UI | Multiple |
| State Management | Zustand | 5.0.9 |
| Data Fetching | TanStack Query | 5.90.12 |
| Styling | Tailwind CSS | 4 |
| Icons | Lucide React | 0.562.0 |
| Notifications | Sonner | 2.0.7 |
| Virtualization | TanStack Virtual | 3.13.13 |

## Key Components

### Pages (8 routes)
1. **Dashboard** (`/`) - Overview with stats, running orchestrators, recent activity
2. **Orchestrators** (`/orchestrators`) - List with filtering, real-time status
3. **Orchestrator Detail** (`/orchestrators/[id]`) - Tabs: Overview, Tasks, Activity, Findings, Dependencies, Settings
4. **Plans** (`/plans`) - Browsable plan list with search/sort
5. **Plan Detail** (`/plans/[name]`) - Plan overview with phases, history
6. **Plan Status** (`/plans/[name]/status`) - Detailed status view
7. **Activity** (`/activity`) - Real-time activity feed with filters
8. **Settings** (`/settings`) - Theme, API config, notifications

### Core Components

| Component | Location | Purpose |
|-----------|----------|---------|
| `OrchestratorCard` | components/orchestrator/ | Displays orchestrator status, progress, controls |
| `OrchestratorHeader` | components/orchestrator/ | Header with pause/resume/stop controls |
| `TasksTab` | components/task/ | Task list grouped by phase |
| `TaskRow` | components/task/ | Individual task with status, actions |
| `PlanCard` | components/plan/ | Plan summary card |
| `DependencyGraph` | components/plan/ | Visual task dependency DAG (575 LOC) |
| `PhaseProgress` | components/plan/ | Phase completion visualization |
| `ActivityTab` | components/activity/ | Activity feed with live updates |
| `FindingsTab` | components/findings/ | Task findings viewer |
| `Sidebar` | components/layout/ | Navigation sidebar |
| `Header` | components/layout/ | Top navigation with command palette |

### Specialized Features

1. **Command Palette** - Keyboard-driven navigation (⌘K)
2. **Real-time Updates** - WebSocket integration for live status
3. **PWA Support** - Offline indicator, service worker
4. **Virtual Lists** - Efficient rendering for large lists
5. **Error Boundaries** - Graceful error handling
6. **Dark/Light Theme** - next-themes integration

## File Count Summary

| Directory | Files | Lines of Code |
|-----------|-------|---------------|
| app/ (pages) | 13 | ~1500 |
| components/ | 60 | ~8675 |
| lib/ | 9 | ~2000 |
| hooks/ | 4 | ~300 |
| **Total** | **89** | **~12,475** |

## Architecture Notes

1. **Client-Side Focus** - Most components use "use client" directive
2. **API-Driven** - All data comes from external API server (port 3001)
3. **No Direct Backend** - Dashboard is purely a frontend consumer
4. **Real-time First** - WebSocket updates are prioritized over polling
5. **Mobile-Responsive** - Tailwind breakpoints throughout
6. **Type-Safe** - Full TypeScript with explicit interfaces

## Integration Points

The dashboard expects an external API server providing:
- REST endpoints for CRUD operations
- WebSocket server for real-time events
- Plan file access (reading plan markdown)
- Status.json file access (plan execution status)
