# Task 5.1: CLI Files/Modules That Can Be Removed

## Overview

This document provides a comprehensive list of all CLI-specific files and modules in the dev_workflow project, categorized by their removal status for a dashboard-only migration. Each file is marked as:

- **SAFE TO REMOVE**: No dashboard or shared dependencies
- **REVIEW NEEDED**: May have shared utilities or conditional dependencies
- **KEEP**: Required by dashboard or shared code

## Summary

| Category | Total Files | Safe to Remove | Review Needed | Keep |
|----------|-------------|----------------|---------------|------|
| TUI Modules | 11 | 11 | 0 | 0 |
| Node.js CLI Scripts | 12 | 8 | 2 | 2 |
| Python CLI Scripts | 6 | 3 | 1 | 2 |
| Node.js Libraries | 20 | 4 | 5 | 11 |
| Python Libraries | 8 | 2 | 1 | 5 |
| Plan Skills | 20 | 17 | 3 | 0 |
| Templates | 14 | 14 | 0 | 0 |
| Test Scripts | 15 | 15 | 0 | 0 |
| **TOTAL** | **106** | **74** | **12** | **20** |

---

## 1. TUI Modules (`scripts/tui/`)

All TUI modules are CLI-only and can be safely removed.

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/tui/__init__.py` | **SAFE TO REMOVE** | Package init for TUI - only imported by TUI components |
| `scripts/tui/keyboard.py` | **SAFE TO REMOVE** | Terminal keyboard input handler - no dashboard use |
| `scripts/tui/panels.py` | **SAFE TO REMOVE** | Rich TUI display panels - terminal-only |
| `scripts/tui/command_palette.py` | **SAFE TO REMOVE** | Command discovery UI - terminal-only |
| `scripts/tui/task_picker.py` | **SAFE TO REMOVE** | Interactive task selection - terminal-only |
| `scripts/tui/task_actions.py` | **SAFE TO REMOVE** | TUI task action handlers - terminal-only |
| `scripts/tui/command_runner.py` | **SAFE TO REMOVE** | TUI command execution - terminal-only |
| `scripts/tui/overlays.py` | **SAFE TO REMOVE** | Modal overlay system - terminal-only |
| `scripts/tui/findings_browser.py` | **SAFE TO REMOVE** | TUI findings viewer - terminal-only |
| `scripts/tui/error_handler.py` | **SAFE TO REMOVE** | TUI error handling - terminal-only |
| `scripts/tui/config.py` | **SAFE TO REMOVE** | TUI configuration - terminal-only |

**Removal Impact**: ~7,000 LOC. Dashboard has its own React-based UI.

---

## 2. Node.js CLI Scripts (`scripts/*.js`)

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/status-cli.js` | **SAFE TO REMOVE** | CLI wrapper for status commands. Dashboard uses `lib/plan-status.js` directly via `api-server.js` |
| `scripts/worktree-cli.js` | **SAFE TO REMOVE** | CLI wrapper for worktree commands. Dashboard uses `lib/worktree-utils.js` directly |
| `scripts/scan-plans.js` | **SAFE TO REMOVE** | Generates plan JSON. API server has own implementation |
| `scripts/parse-plan-structure.js` | **SAFE TO REMOVE** | Plan parsing CLI. Not used by dashboard |
| `scripts/substitute-variables.js` | **SAFE TO REMOVE** | Template variable substitution. CLI-only (plan creation) |
| `scripts/validate-plan-format.js` | **SAFE TO REMOVE** | Plan validation CLI. Not exposed to dashboard |
| `scripts/migrate-completed-plan.js` | **SAFE TO REMOVE** | Migration utility. CLI-only operation |
| `scripts/cache-clear.js` | **SAFE TO REMOVE** | Cache clearing utility. Debugging tool only |
| `scripts/cache-stats.js` | **SAFE TO REMOVE** | Cache statistics. Debugging tool only |
| `scripts/check-file-status.js` | **SAFE TO REMOVE** | File status checking. CLI debugging utility |
| `scripts/index.js` | **REVIEW NEEDED** | Unified CLI entry point. Routes to other CLI scripts. Can be removed if all child scripts are removed |
| `scripts/api-server.js` | **KEEP** | Main API server for dashboard. **REQUIRED** by dashboard |

**Removal Impact**: ~3,000 LOC for CLI scripts. `api-server.js` must be kept.

---

## 3. Python CLI Scripts (`scripts/*.py`)

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/switch_plan.py` | **SAFE TO REMOVE** | Interactive plan switching. CLI-only |
| `scripts/multi_plan_monitor.py` | **SAFE TO REMOVE** | Multi-plan TUI monitor. Terminal-only |
| `scripts/generate_api_types.py` | **SAFE TO REMOVE** | TypeScript type generation. Development utility only |
| `scripts/run_api_server.py` | **REVIEW NEEDED** | Standalone API server runner. Dashboard may use directly, or can start `orchestrator_server.py` differently |
| `scripts/plan_orchestrator.py` | **KEEP** | Main orchestrator. **REQUIRED** - dashboard starts orchestrator via API |
| `scripts/orchestrator_server.py` | **KEEP** | FastAPI server for orchestrator API. **REQUIRED** for real-time updates and control |

**Removal Impact**: ~2,000 LOC. Keep `plan_orchestrator.py` and `orchestrator_server.py`.

---

## 4. Node.js Libraries (`scripts/lib/*.js`)

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/lib/plan-status.js` | **KEEP** | Core status management. **REQUIRED** by `api-server.js` |
| `scripts/lib/worktree-utils.js` | **KEEP** | Worktree operations. **REQUIRED** by `api-server.js` |
| `scripts/lib/markdown-parser.js` | **KEEP** | Plan markdown parsing. Used by status library |
| `scripts/lib/file-utils.js` | **KEEP** | File operations. Used by multiple core libs |
| `scripts/lib/timestamp-utils.js` | **KEEP** | Timestamp formatting. Used by status library |
| `scripts/lib/plan-output-utils.js` | **KEEP** | Plan output handling. Used by API server |
| `scripts/lib/conflict-detector.js` | **KEEP** | Conflict detection. Used by worktree-utils |
| `scripts/lib/git-queue.js` | **KEEP** | Git operation queueing. Used by worktree-utils |
| `scripts/lib/arg-parser.js` | **REVIEW NEEDED** | CLI argument parsing. Only used by CLI scripts |
| `scripts/lib/agent-cache.js` | **REVIEW NEEDED** | Agent caching. Check if API server uses |
| `scripts/lib/agent-launcher.js` | **REVIEW NEEDED** | Agent launching. Check if orchestrator needs |
| `scripts/lib/agent-pool.js` | **REVIEW NEEDED** | Agent pooling. Check if orchestrator needs |
| `scripts/lib/schemas/index.js` | **KEEP** | Schema exports. Used by status library |
| `scripts/lib/schemas/plan-status.json` | **KEEP** | Status schema. Core validation |
| `scripts/lib/schemas/verify-result.json` | **REVIEW NEEDED** | Verification schema. CLI-only feature |
| `scripts/lib/schemas/analysis-result.json` | **SAFE TO REMOVE** | Analysis schema. CLI/agent-only |
| `scripts/lib/schemas/research-result.json` | **SAFE TO REMOVE** | Research schema. CLI/agent-only |

---

## 5. Python Libraries (`scripts/lib/*.py`)

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/lib/orchestrator_registry.py` | **KEEP** | Orchestrator instance management. **REQUIRED** by orchestrator |
| `scripts/lib/orchestrator_ipc.py` | **KEEP** | Inter-process communication. **REQUIRED** by orchestrator |
| `scripts/lib/event_bus.py` | **KEEP** | Event pub/sub system. **REQUIRED** by orchestrator_server |
| `scripts/lib/status_monitor.py` | **KEEP** | Status monitoring. **REQUIRED** by orchestrator |
| `scripts/lib/claude_runner.py` | **KEEP** | Claude session runner. **REQUIRED** by orchestrator |
| `scripts/lib/tui.py` | **REVIEW NEEDED** | Rich TUI manager. Used by orchestrator for `--no-tui` flag handling. May need stub |
| `scripts/lib/multi_plan_tui.py` | **SAFE TO REMOVE** | Multi-plan TUI. Terminal-only |

**Note**: `scripts/lib/__pycache__/` directory can be removed (auto-generated).

---

## 6. Plan Skills (`.claude/commands/plan/`)

| File | Status | Rationale |
|------|--------|-----------|
| `.claude/commands/plan/create.md` | **SAFE TO REMOVE** | Plan creation. CLI-only, no dashboard equivalent |
| `.claude/commands/plan/implement.md` | **SAFE TO REMOVE** | Task implementation. CLI-only direct execution |
| `.claude/commands/plan/batch.md` | **SAFE TO REMOVE** | Batch execution. CLI-only |
| `.claude/commands/plan/verify.md` | **SAFE TO REMOVE** | Task verification. CLI-only |
| `.claude/commands/plan/explain.md` | **SAFE TO REMOVE** | Task explanation. CLI-only |
| `.claude/commands/plan/split.md` | **SAFE TO REMOVE** | Task splitting. CLI-only |
| `.claude/commands/plan/set.md` | **SAFE TO REMOVE** | Plan switching. CLI-only |
| `.claude/commands/plan/status.md` | **SAFE TO REMOVE** | Status display. CLI-only |
| `.claude/commands/plan/templates.md` | **SAFE TO REMOVE** | Template listing. CLI-only |
| `.claude/commands/plan/archive.md` | **SAFE TO REMOVE** | Plan archival. CLI-only |
| `.claude/commands/plan/complete.md` | **SAFE TO REMOVE** | Plan completion. CLI-only |
| `.claude/commands/plan/cleanup.md` | **SAFE TO REMOVE** | Plan cleanup. CLI-only |
| `.claude/commands/plan/abandon.md` | **SAFE TO REMOVE** | Plan abandonment. CLI-only |
| `.claude/commands/plan/rollback.md` | **SAFE TO REMOVE** | Plan rollback. CLI-only |
| `.claude/commands/plan/migrate.md` | **SAFE TO REMOVE** | Format migration. CLI-only |
| `.claude/commands/plan/worktree.md` | **SAFE TO REMOVE** | Worktree management. CLI-only |
| `.claude/commands/plan/orchestrate.md` | **REVIEW NEEDED** | Orchestrator trigger. Dashboard uses API instead, but may want to keep for hybrid usage |
| `.claude/commands/plan/_common/status-tracking.md` | **REVIEW NEEDED** | Status utilities. Used by skills only, but may have reusable patterns |
| `.claude/commands/plan/_common/git-utilities.md` | **REVIEW NEEDED** | Git utilities. Used by skills only |
| `.claude/commands/plan/_common/uncommitted-changes-protection.md` | **SAFE TO REMOVE** | Safety checks. Skills-only |

**Removal Impact**: ~3,000 LOC. Removes plan authoring capability from Claude Code.

---

## 7. Templates (`.claude/templates/`)

| File | Status | Rationale |
|------|--------|-----------|
| `.claude/templates/agents/architecture-analysis.md` | **SAFE TO REMOVE** | Agent template. CLI-only |
| `.claude/templates/agents/verify-agent.md` | **SAFE TO REMOVE** | Agent template. CLI-only |
| `.claude/templates/agents/analysis-agent.md` | **SAFE TO REMOVE** | Agent template. CLI-only |
| `.claude/templates/agents/research-agent.md` | **SAFE TO REMOVE** | Agent template. CLI-only |
| `.claude/templates/output/error-report.md` | **SAFE TO REMOVE** | Output template. CLI-only |
| `.claude/templates/output/tree-view.md` | **SAFE TO REMOVE** | Output template. CLI-only |
| `.claude/templates/output/progress-display.md` | **SAFE TO REMOVE** | Output template. CLI-only |
| `.claude/templates/output/execution-summary.md` | **SAFE TO REMOVE** | Output template. CLI-only |
| `.claude/templates/shared/box-styles.md` | **SAFE TO REMOVE** | Shared styles. CLI-only |
| `.claude/templates/shared/status-symbols.md` | **SAFE TO REMOVE** | Status symbols. CLI-only |
| `.claude/templates/questions/error-recovery.md` | **SAFE TO REMOVE** | Question template. CLI-only |
| `.claude/templates/questions/next-steps.md` | **SAFE TO REMOVE** | Question template. CLI-only |
| `.claude/templates/questions/execution-confirm.md` | **SAFE TO REMOVE** | Question template. CLI-only |
| `.claude/templates/questions/task-selection.md` | **SAFE TO REMOVE** | Question template. CLI-only |

**Removal Impact**: Removes template system for plan creation.

---

## 8. Test Scripts (`scripts/tests/`)

All test scripts are development utilities and can be removed in a production dashboard-only deployment.

| File | Status | Rationale |
|------|--------|-----------|
| `scripts/tests/test-status-cli.js` | **SAFE TO REMOVE** | Tests for status-cli.js |
| `scripts/tests/test-parallel-updates.js` | **SAFE TO REMOVE** | Parallel update tests |
| `scripts/tests/test-recovery.js` | **SAFE TO REMOVE** | Recovery tests |
| `scripts/tests/test-lib-modules.js` | **SAFE TO REMOVE** | Library module tests |
| `scripts/tests/test-constraint-parsing.js` | **SAFE TO REMOVE** | Constraint parsing tests |
| `scripts/tests/test-plan-arg.js` | **SAFE TO REMOVE** | Plan argument tests |
| `scripts/tests/test-file-conflicts.js` | **SAFE TO REMOVE** | File conflict tests |
| `scripts/tests/test-parallel-phases.js` | **SAFE TO REMOVE** | Parallel phase tests |
| `scripts/tests/test-parallel-foundation.js` | **SAFE TO REMOVE** | Foundation tests |
| `scripts/tests/test-dependencies.js` | **SAFE TO REMOVE** | Dependency tests |
| `scripts/tests/test-integration-phase13.js` | **SAFE TO REMOVE** | Integration tests |
| `scripts/tests/run-all-tests.js` | **SAFE TO REMOVE** | Test runner |
| `scripts/tests/validate-status-files.js` | **SAFE TO REMOVE** | Status file validation |
| `scripts/tests/test-orchestrator-constraints.py` | **SAFE TO REMOVE** | Orchestrator constraint tests |
| `scripts/tests/test-orchestrator-e2e.py` | **SAFE TO REMOVE** | End-to-end orchestrator tests |

**Note**: Test scripts should be kept in version control but can be excluded from production deployments.

---

## Recommended Removal Order

For safe incremental removal:

### Phase 1: Clear Removals (No Dependencies)
1. `scripts/tui/` - Entire directory
2. `scripts/tests/` - Entire directory
3. `.claude/templates/` - Entire directory
4. CLI wrappers: `status-cli.js`, `worktree-cli.js`, `scan-plans.js`

### Phase 2: Utility Scripts
5. `cache-clear.js`, `cache-stats.js`, `check-file-status.js`
6. `parse-plan-structure.js`, `substitute-variables.js`, `validate-plan-format.js`
7. `migrate-completed-plan.js`
8. `switch_plan.py`, `multi_plan_monitor.py`, `generate_api_types.py`

### Phase 3: Plan Skills (If Removing CLI Authoring)
9. All `.claude/commands/plan/*.md` files
10. `.claude/commands/plan/_common/` directory

### Phase 4: Review Items
11. `scripts/index.js` - Remove after all child scripts removed
12. `scripts/lib/arg-parser.js` - Verify no dashboard usage
13. `scripts/lib/tui.py` - May need stub for orchestrator `--no-tui`
14. Agent libraries - Check orchestrator dependencies

---

## Files That MUST Be Kept

These files are required for dashboard functionality:

### API Layer
- `scripts/api-server.js` - Main REST API for dashboard
- `scripts/orchestrator_server.py` - FastAPI WebSocket server

### Core Python
- `scripts/plan_orchestrator.py` - Orchestrator execution
- `scripts/lib/orchestrator_registry.py` - Instance management
- `scripts/lib/orchestrator_ipc.py` - IPC communication
- `scripts/lib/event_bus.py` - Event system
- `scripts/lib/status_monitor.py` - Status monitoring
- `scripts/lib/claude_runner.py` - Claude session runner

### Core Node.js
- `scripts/lib/plan-status.js` - Status management
- `scripts/lib/worktree-utils.js` - Worktree operations
- `scripts/lib/markdown-parser.js` - Plan parsing
- `scripts/lib/file-utils.js` - File utilities
- `scripts/lib/timestamp-utils.js` - Timestamps
- `scripts/lib/plan-output-utils.js` - Output handling
- `scripts/lib/conflict-detector.js` - Conflict detection
- `scripts/lib/git-queue.js` - Git operations
- `scripts/lib/schemas/` - Validation schemas (core ones)

---

## Estimated Impact

| Metric | Value |
|--------|-------|
| Files Safe to Remove | 74 |
| Files Needing Review | 12 |
| Files to Keep | 20 |
| Estimated LOC Removable | ~17,000 |
| Estimated LOC to Keep | ~11,500 |
| Storage Savings | ~50% of scripts/ |

---

## Pre-Removal Checklist

Before removing any file:

1. [ ] Verify no import/require statements reference the file
2. [ ] Check for dynamic imports (e.g., `require(path)`)
3. [ ] Search for file path strings in codebase
4. [ ] Test dashboard functionality after removal
5. [ ] Verify orchestrator can still start and run
6. [ ] Check WebSocket connections work
7. [ ] Validate API endpoints respond correctly

## Post-Removal Verification

After removing files:

1. [ ] Dashboard loads without errors
2. [ ] Plans list displays correctly
3. [ ] Orchestrator can be started from dashboard
4. [ ] Pause/Resume/Stop controls work
5. [ ] Real-time updates via WebSocket work
6. [ ] Findings viewer displays content
7. [ ] Activity feed shows updates
8. [ ] No console errors in browser or server
