# Task 6.1: Prioritized Missing Features to Add to Dashboard

## Overview

This document prioritizes the missing features identified in tasks 3.3 and 3.4, considering:
- User impact (workflow disruption)
- Technical feasibility (effort vs complexity)
- Dependencies (what must be done first)
- Migration blockers (dashboard unusable without these)

## Priority Tier System

| Tier | Description | Timeline |
|------|-------------|----------|
| **P0** | Migration blockers - dashboard unusable without these | Immediate |
| **P1** | High-impact features - significant workflow degradation | Phase 1 |
| **P2** | Quality-of-life improvements - acceptable workarounds exist | Phase 2 |
| **P3** | Nice-to-have - minimal impact if deferred | Future |

---

## P0: Migration Blockers (MUST HAVE)

These features must be implemented before CLI/TUI can be removed.

### 1. Plan Creation Wizard

| Aspect | Details |
|--------|---------|
| **Gap** | No way to create new plans from dashboard |
| **Impact** | Users cannot start new work without CLI |
| **Effort** | High (2-3 days) |
| **Dependencies** | Template system integration |
| **Priority Score** | 10/10 |

**Requirements:**
- Template browser/selector
- Plan name and description input
- Variable substitution support
- Validation before save
- File creation in `docs/plans/`

### 2. Git Auto-Commit Integration

| Aspect | Details |
|--------|---------|
| **Gap** | Orchestrator changes not version controlled |
| **Impact** | Work can be lost; no audit trail per task |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | None (backend only) |
| **Priority Score** | 10/10 |

**Requirements:**
- Backend enhancement to auto-commit after task completion
- Commit message format: `[plan-name] task X.Y: description`
- Handle merge conflicts gracefully
- Config option to enable/disable

### 3. Task Implementation Trigger

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot execute individual tasks directly |
| **Impact** | Users forced to use orchestrator for all execution |
| **Effort** | Very High (3-5 days) |
| **Dependencies** | Backend Claude session spawning |
| **Priority Score** | 9/10 |

**Requirements:**
- "Implement" button on task row
- Spawn Claude session for specific task
- Stream progress back to UI
- Handle completion/failure callbacks

---

## P1: High-Impact Features (SHOULD HAVE)

These significantly improve the user experience but have workarounds.

### 4. Task Explanation

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot get task context/requirements from dashboard |
| **Impact** | Users must read plan file manually |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | Claude session for explain |
| **Priority Score** | 8/10 |

**Requirements:**
- "Explain" button on task row
- Claude-generated explanation in modal
- Cache explanations to avoid repeat calls

### 5. Task Verification

| Aspect | Details |
|--------|---------|
| **Gap** | No way to verify task completion |
| **Impact** | Quality assurance requires external review |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | Claude session for verify |
| **Priority Score** | 8/10 |

**Requirements:**
- "Verify" button on completed tasks
- Claude-generated verification report
- Status badge update based on verification

### 6. Plan Archive Action

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot archive completed plans from UI |
| **Impact** | Plan list becomes cluttered |
| **Effort** | Low (4-8 hours) |
| **Dependencies** | Backend archive endpoint |
| **Priority Score** | 7/10 |

**Requirements:**
- "Archive" menu action on completed plans
- Move plan to archive location
- Update dashboard to hide archived plans

### 7. Agent Tracking Panel

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot monitor parallel agent execution |
| **Impact** | Limited visibility during batch execution |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | WebSocket event enhancements |
| **Priority Score** | 7/10 |

**Requirements:**
- New panel showing active agents
- "Waiting for N/M agents" indicator
- Per-agent status and duration

### 8. Output Streaming

| Aspect | Details |
|--------|---------|
| **Gap** | Limited visibility into Claude execution |
| **Impact** | Cannot debug execution issues in real-time |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | WebSocket log streaming |
| **Priority Score** | 7/10 |

**Requirements:**
- Real-time output panel (terminal-like)
- Scroll lock and search
- Tool call highlighting

### 9. Worktree Management UI

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot create/remove worktrees from dashboard |
| **Impact** | Cannot run parallel plans without CLI |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | Backend worktree endpoints |
| **Priority Score** | 6/10 |

**Requirements:**
- Worktree list panel (exists, read-only)
- Create worktree button with plan selection
- Remove worktree with confirmation
- Resource limit warnings

---

## P2: Quality-of-Life Improvements (COULD HAVE)

These improve workflow efficiency but are not essential.

### 10. Vim-style Keyboard Navigation

| Aspect | Details |
|--------|---------|
| **Gap** | Mouse-only navigation |
| **Impact** | Power users less efficient |
| **Effort** | Low (4-8 hours) |
| **Dependencies** | None |
| **Priority Score** | 5/10 |

**Requirements:**
- `j/k` for list navigation
- `Enter` to select
- `/` for search
- `g/G` for top/bottom

### 11. Template Browser

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot browse templates |
| **Impact** | Template discovery requires CLI |
| **Effort** | Low (4-8 hours) |
| **Dependencies** | Part of plan creation |
| **Priority Score** | 5/10 |

**Requirements:**
- List available templates
- Template preview
- Template metadata display

### 12. Subtask Tree View

| Aspect | Details |
|--------|---------|
| **Gap** | Flat task list, no hierarchy |
| **Impact** | Subtask relationships harder to see |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | None |
| **Priority Score** | 5/10 |

**Requirements:**
- Collapsible task tree
- Parent/child relationship display
- Aggregate progress per parent

### 13. Task Splitting

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot decompose large tasks |
| **Impact** | Tasks remain monolithic |
| **Effort** | High (2-3 days) |
| **Dependencies** | Plan editing capability |
| **Priority Score** | 4/10 |

**Requirements:**
- "Split" action on pending tasks
- Subtask editor modal
- Update plan markdown
- Refresh status tracking

### 14. Plan Rollback

| Aspect | Details |
|--------|---------|
| **Gap** | Cannot undo plan changes |
| **Impact** | Mistakes harder to correct |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | Git integration |
| **Priority Score** | 4/10 |

**Requirements:**
- "Rollback" action on plan
- List recent commits
- Selective rollback support

### 15. Error Recovery Strategies

| Aspect | Details |
|--------|---------|
| **Gap** | No automatic recovery from failures |
| **Impact** | More manual intervention |
| **Effort** | Medium (1-2 days) |
| **Dependencies** | Backend orchestrator enhancement |
| **Priority Score** | 4/10 |

**Requirements:**
- Configurable retry policies
- Exponential backoff settings
- Error categorization for smart recovery

---

## P3: Nice-to-Have (WON'T HAVE for MVP)

Defer these features to post-migration phases.

### 16. Plan Cleanup Action
- **Effort:** Low | **Impact:** Low | **Priority:** 3/10
- Infrequent operation, CLI acceptable

### 17. Plan Abandonment
- **Effort:** Low | **Impact:** Low | **Priority:** 3/10
- Rare action, stop + manual cleanup acceptable

### 18. Keybinding Customization
- **Effort:** Low | **Impact:** Low | **Priority:** 2/10
- Power user feature, default shortcuts sufficient

### 19. Search History
- **Effort:** Very Low | **Impact:** Very Low | **Priority:** 2/10
- Browser localStorage can handle

### 20. Cache Management UI
- **Effort:** Low | **Impact:** Very Low | **Priority:** 1/10
- Developer-only feature, CLI acceptable

---

## Implementation Roadmap

### Phase 0: Pre-Migration Essentials (P0)

| # | Feature | Effort | Dependencies |
|---|---------|--------|--------------|
| 1 | Git Auto-Commit | 1-2 days | None |
| 2 | Plan Creation Wizard | 2-3 days | Template system |
| 3 | Task Implementation Trigger | 3-5 days | Claude session |

**Total Effort:** ~6-10 days
**Completion Criteria:** Dashboard can create plans, execute tasks, and commit changes

### Phase 1: Enhanced Usability (P1)

| # | Feature | Effort | Dependencies |
|---|---------|--------|--------------|
| 4 | Task Explanation | 1-2 days | Claude session |
| 5 | Task Verification | 1-2 days | Claude session |
| 6 | Plan Archive | 4-8 hours | Backend endpoint |
| 7 | Agent Tracking | 1-2 days | WebSocket events |
| 8 | Output Streaming | 1-2 days | WebSocket logs |
| 9 | Worktree Management | 1-2 days | Backend endpoints |

**Total Effort:** ~7-12 days
**Completion Criteria:** Dashboard provides full monitoring and control

### Phase 2: Power User Features (P2)

| # | Feature | Effort | Dependencies |
|---|---------|--------|--------------|
| 10 | Vim Navigation | 4-8 hours | None |
| 11 | Template Browser | 4-8 hours | Plan creation |
| 12 | Subtask Tree | 1-2 days | None |
| 13 | Task Splitting | 2-3 days | Plan editing |
| 14 | Plan Rollback | 1-2 days | Git integration |
| 15 | Error Recovery | 1-2 days | Backend |

**Total Effort:** ~7-12 days
**Completion Criteria:** Full feature parity with TUI

---

## Summary Matrix

| Priority | Features | Total Effort | % of Total |
|----------|----------|--------------|------------|
| **P0** | 3 | 6-10 days | 30% |
| **P1** | 6 | 7-12 days | 35% |
| **P2** | 6 | 7-12 days | 30% |
| **P3** | 5 | 2-4 days | 5% |
| **Total** | **20** | **22-38 days** | 100% |

## Recommendation

1. **Minimum Viable Dashboard-Only:** Implement P0 features (~2 weeks)
2. **Recommended for Production:** P0 + P1 features (~4 weeks)
3. **Full Feature Parity:** P0 + P1 + P2 features (~6-8 weeks)
4. **P3 features:** Defer indefinitely or implement on-demand

The dashboard can become the primary interface after P0 completion, with CLI retained for advanced operations until P1 is complete.
