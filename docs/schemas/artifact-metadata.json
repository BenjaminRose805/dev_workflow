{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "artifact-metadata.json",
  "title": "Artifact Metadata Schema",
  "description": "Common metadata fields required for all artifacts in the dev workflow system",
  "type": "object",
  "required": ["artifact_type", "version", "created_at", "created_by", "command", "status"],
  "properties": {
    "artifact_type": {
      "type": "string",
      "description": "Type of artifact from the artifact type registry",
      "enum": [
        "analysis-report",
        "architecture-document",
        "audit-report",
        "codebase-map",
        "component-spec",
        "components-catalog",
        "exploration-report",
        "implementation-plan",
        "requirements-spec",
        "review-report",
        "test-results",
        "validation-report"
      ]
    },
    "version": {
      "type": "string",
      "description": "Semantic version of the artifact (e.g., 1.0.0)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "created_at": {
      "type": "string",
      "description": "ISO-8601 timestamp when artifact was created",
      "format": "date-time"
    },
    "created_by": {
      "type": "string",
      "description": "Model identifier that created the artifact",
      "enum": ["sonnet", "opus", "haiku"]
    },
    "command": {
      "type": "string",
      "description": "The producing command (e.g., /explore, /analyze)",
      "pattern": "^/[a-z]+$"
    },
    "subcommand": {
      "type": "string",
      "description": "The producing sub-command (e.g., quick, deep)",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "status": {
      "type": "string",
      "description": "Lifecycle status of the artifact",
      "enum": ["draft", "active", "superseded", "archived"]
    },
    "updated_at": {
      "type": "string",
      "description": "ISO-8601 timestamp of last update",
      "format": "date-time"
    },
    "tags": {
      "type": "array",
      "description": "Classification tags for the artifact",
      "items": {
        "type": "string"
      }
    },
    "depends_on": {
      "type": "array",
      "description": "IDs of upstream artifacts this depends on",
      "items": {
        "type": "string"
      }
    },
    "consumed_by": {
      "type": "array",
      "description": "Commands that consume this artifact",
      "items": {
        "type": "string"
      }
    },
    "project_context": {
      "type": "object",
      "description": "Project-specific context for the artifact",
      "properties": {
        "project": {
          "type": "string",
          "description": "Project identifier"
        },
        "feature": {
          "type": "string",
          "description": "Feature scope"
        },
        "component": {
          "type": "string",
          "description": "Component scope"
        }
      }
    }
  }
}
